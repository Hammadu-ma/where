<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MED QUIZ Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --primary-dark: #3a0ca3;
            --secondary: #f72585;
            --success: #4cc9f0;
            --warning: #f9c74f;
            --danger: #f94144;
            --gray-50: #f8f9fa;
            --gray-100: #f1f3f5;
            --gray-800: #343a40;
            --gray-900: #212529;
            --bg-primary: var(--gray-900);
            --bg-secondary: #1a1d21;
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --card-bg: rgba(35, 39, 47, 0.95);
            --card-border: #4cc9f0;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);
            --transition: all 0.2s ease-in-out;
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --header-height: 50px;
            --max-width: 800px;
            --side-padding: 1rem;
            --gradient-primary: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
        }

        [data-theme="light"] {
            --bg-primary: #f5f7fa;
            --bg-secondary: #ffffff;
            --text-primary: #1a1d21;
            --text-secondary: rgba(26, 29, 33, 0.7);
            --card-bg: rgba(255, 255, 255, 0.95);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            line-height: 1.5;
            font-weight: 400;
            overflow-x: hidden;
            padding: 0;
        }

        /* Compact Header */
        header {
            height: var(--header-height);
            background: var(--gradient-primary);
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--side-padding);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
            font-size: 1.1rem;
            color: white;
        }

        .logo-icon {
            font-size: 1.25rem;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--secondary);
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Main Content */
        main {
            flex: 1;
            padding: 1.5rem var(--side-padding);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .quiz-container {
            width: 100%;
            max-width: var(--max-width);
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
            border: 1px solid var(--card-border);
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .quiz-title {
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .quiz-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .stats-container {
            display: flex;
            gap: 0.75rem;
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem 0.75rem;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-md);
            min-width: 60px;
        }

        .stat-value {
            font-weight: 700;
            font-size: 1rem;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: var(--radius-md);
            overflow: hidden;
            margin: 1.5rem 0;
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: var(--radius-md);
            transition: width 0.4s ease;
        }

        /* Question Meta */
        .question-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .question-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .tag {
            padding: 0.25rem 0.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .difficulty-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .difficulty-easy { background-color: var(--success); }
        .difficulty-medium { background-color: var(--warning); }
        .difficulty-hard { background-color: var(--danger); }

        .bookmark-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.1rem;
            transition: var(--transition);
        }

        .bookmark-btn.bookmarked {
            color: var(--warning);
        }

        /* Question */
        .question-number {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.75rem;
            text-align: center;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        /* Options */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .option:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
            border-color: var(--primary-light);
        }

        .option.selected {
            background: rgba(67, 97, 238, 0.15);
            border-color: var(--primary);
        }

        .option.correct {
            background: rgba(76, 201, 240, 0.15);
            border-color: var(--success);
        }

        .option.incorrect {
            background: rgba(249, 65, 68, 0.15);
            border-color: var(--danger);
        }

        .option-letter {
            width: 28px;
            height: 28px;
            border-radius: var(--radius-sm);
            background: rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 1rem;
            flex-shrink: 0;
            font-size: 0.9rem;
        }

        .option.selected .option-letter {
            background: var(--primary);
            color: white;
        }

        .option.correct .option-letter {
            background: var(--success);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--danger);
            color: white;
        }

        .option-text {
            flex: 1;
            font-size: 0.95rem;
        }

        /* Feedback */
        .feedback {
            padding: 1rem;
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.9rem;
        }

        .feedback.correct {
            background: rgba(76, 201, 240, 0.15);
            color: var(--success);
        }

        .feedback.incorrect {
            background: rgba(249, 65, 68, 0.15);
            color: var(--danger);
        }

        .feedback.skipped {
            background: rgba(67, 97, 238, 0.15);
            color: var(--primary);
        }

        .feedback-icon {
            font-size: 1.25rem;
        }

        /* Explanation */
        .explanation-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }

        .explanation-container.expanded {
            max-height: 500px;
        }

        .explanation {
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-md);
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .explanation-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        /* Navigation */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
            gap: 0.75rem;
        }

        .btn {
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            font-size: 0.9rem;
            flex: 1;
            justify-content: center;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
        }

        .btn-secondary:hover:not(:disabled) {
            background: rgba(255,255,255,0.2);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        /* Study Mode Toggle */
        .study-mode-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-md);
            justify-content: center;
            font-size: 0.9rem;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255,255,255,0.1);
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Results */
        .results-container {
            text-align: center;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: conic-gradient(var(--gradient-primary) 0% var(--p, 0%), var(--bg-secondary) var(--p, 0%) 100%);
            position: relative;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: var(--card-bg);
        }

        .score-text {
            position: relative;
            z-index: 1;
        }

        .score-value {
            font-size: 1.75rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .score-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .result-stat {
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-md);
        }

        .result-stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .result-stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .review-section {
            margin-top: 2rem;
            text-align: left;
        }

        .review-title {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--primary);
            text-align: center;
        }

        .review-item {
            padding: 1rem;
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
            background: rgba(255,255,255,0.05);
            font-size: 0.9rem;
        }

        .review-item.correct {
            border-left: 3px solid var(--success);
        }

        .review-item.incorrect {
            border-left: 3px solid var(--danger);
        }

        .review-item.skipped {
            border-left: 3px solid var(--primary);
        }

        .review-question {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .review-answer {
            margin-bottom: 0.5rem;
            padding: 0.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-sm);
        }

        .review-explanation {
            color: var(--text-secondary);
            padding-top: 0.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        footer {
            padding: 2rem var(--side-padding);
            background: var(--bg-secondary);
            text-align: center;
            font-size: 0.875rem;
            color: var(--text-secondary);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            margin-top: auto;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(5px);
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .modal {
            background: var(--card-bg);
            border-radius: var(--radius-2xl);
            padding: 2.5rem;
            width: 90%;
            max-width: 600px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            transform: translateY(-50px) scale(0.95);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--card-border);
        }
        .modal-overlay.active .modal {
            transform: translateY(0) scale(1);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        .modal-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
        }
        .modal-close {
            background: none;
            border: none;
            font-size: 1.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition-base);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close:hover {
            background: rgba(255,255,255,0.1);
            color: var(--primary);
        }
        .modal-body {
            margin-bottom: 2rem;
        }
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        .difficulty-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 0.75rem;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        .difficulty-easy {
            background-color: var(--success);
            box-shadow: 0 0 10px var(--success);
        }
        .difficulty-medium {
            background-color: var(--warning);
            box-shadow: 0 0 10px var(--warning);
        }
        .difficulty-hard {
            background-color: var(--danger);
            box-shadow: 0 0 10px var(--danger);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
            transition: var(--transition-base);
        }
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        .stat-card-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        .stat-card-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--gradient-primary);
            opacity: 0;
            border-radius: 2px;
        }
        @keyframes confettiFall {
            0% {
                opacity: 1;
                transform: translateY(-100px) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(720deg);
            }
        }
        .fab {
            position: fixed;
            bottom: 2.5rem;
            right: 2.5rem;
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            box-shadow: var(--shadow-xl);
            cursor: pointer;
            z-index: 100;
            transition: var(--transition-smooth);
            border: 3px solid rgba(255,255,255,0.2);
        }
        .fab:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 20px 40px rgba(67, 97, 238, 0.3);
        }
        .study-mode-toggle {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: var(--radius-lg);
            justify-content: center;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 28px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255,255,255,0.1);
            transition: .4s;
            border-radius: 34px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        input:checked + .toggle-slider {
            background-color: var(--primary);
            box-shadow: 0 0 10px rgba(67, 97, 238, 0.5);
        }
        input:checked + .toggle-slider:before {
            transform: translateX(32px);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes bounceIn {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .fade-in {
            animation: fadeIn 0.6s ease;
        }
        .pulse {
            animation: pulse 1s infinite;
        }
        .bounce-in {
            animation: bounceIn 0.6s ease;
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        .text-center {
            text-align: center;
        }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }
        .full-width {
            width: 100%;
        }
        @media (max-width: 768px) {
            :root {
                --side-padding: 1rem;
                --header-height: 50px;
            }
            .quiz-container {
                padding: 2rem;
                border-radius: var(--radius-xl);
            }
            .quiz-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1.5rem;
            }
            .stats-container {
                width: 100%;
                justify-content: space-between;
            }
            .results-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            .score-circle {
                width: 140px;
                height: 140px;
            }
            .score-circle::before {
                width: 110px;
                height: 110px;
            }
            .score-value {
                font-size: 2.25rem;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .fab {
                bottom: 1.5rem;
                right: 1.5rem;
                width: 55px;
                height: 55px;
                font-size: 1.5rem;
            }
            .navigation {
                flex-direction: column;
            }
            .btn {
                width: 100%;
            }
            .options-grid {
                grid-template-columns: 1fr;
            }
            .options-grid .option:nth-child(1),
            .options-grid .option:nth-child(2),
            .options-grid .option:nth-child(3),
            .options-grid .option:nth-child(4) {
                grid-column: auto;
            }
        }
        @media (max-width: 480px) {
            .option {
                padding: 1rem;
            }
            .option-letter {
                width: 32px;
                height: 32px;
                margin-right: 1rem;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .question-text {
                font-size: 1.1rem;
            }
        }
        /* Explanation Section Styling */
.explanation-container {
    background: var(--background-secondary, #f8f9fa); /* Light background for contrast */
    border-radius: 12px; /* Rounded corners */
    padding: 20px;
    margin-top: 20px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
    transition: all 0.3s ease; /* Smooth transition for expand/collapse */
    border: 1px solid var(--border-color, #e0e0e0); /* Subtle border */
}

.explanation-container.expanded {
    max-height: 800px; /* Increased max-height for content */
    opacity: 1;
    transform: translateY(0); /* Smooth slide-in effect */
}

.explanation-container:not(.expanded) {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transform: translateY(-10px); /* Slight upward shift when hidden */
}

.explanation {
    display: flex;
    flex-direction: column;
    gap: 12px; /* Spacing between title and text */
}

.explanation-title {
    font-size: 1.25rem; /* Slightly larger for emphasis */
    font-weight: 600;
    color: var(--primary, #4361ee); /* Match quiz primary color */
    border-bottom: 2px solid var(--primary-light, #4cc9f0); /* Underline effect */
    padding-bottom: 8px;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.explanation-title::before {
    content: "\f05a"; /* Font Awesome info-circle icon */
    font-family: "Font Awesome 5 Free";
    font-weight: 900;
    color: var(--primary, #4361ee);
    font-size: 1.2rem;
}

#explanation-text {
    font-size: 1rem;
    line-height: 1.6; /* Improved readability */
    color: var(--text-color, #333);
}

/* Styling for the "Why Not Other Options" list */
#explanation-text ul {
    list-style: none; /* Remove default bullets */
    padding: 0;
    margin: 16px 0 0 0;
}

#explanation-text li {
    position: relative;
    padding-left: 28px; /* Space for custom bullet */
    margin-bottom: 12px; /* Spacing between items */
    font-size: 0.95rem;
    line-height: 1.5;
    color: var(--text-secondary, #555);
    transition: transform 0.2s ease, background 0.2s ease;
}

#explanation-text li::before {
    content: "\f00d"; /* Font Awesome times-circle icon for incorrect options */
    font-family: "Font Awesome 5 Free";
    font-weight: 900;
    color: var(--danger, #f72585); /* Red/pink for incorrect options */
    position: absolute;
    left: 0;
    top: 4px;
    font-size: 1rem;
}

#explanation-text li strong {
    color: var(--text-color, #333); /* Darker color for option labels */
    font-weight: 600;
}

/* Hover effect for list items */
#explanation-text li:hover {
    background: var(--background-hover, rgba(67, 97, 238, 0.1)); /* Subtle highlight */
    border-radius: 6px;
    transform: translateX(4px); /* Slight shift for interactivity */
    padding-left: 32px; /* Adjust for hover */
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .explanation-container {
        padding: 15px;
        margin-top: 15px;
    }

    .explanation-title {
        font-size: 1.1rem;
    }

    #explanation-text {
        font-size: 0.95rem;
    }

    #explanation-text li {
        font-size: 0.9rem;
        padding-left: 24px;
        margin-bottom: 10px;
    }
}

/* Animation for expanding explanation */
@keyframes explanationFadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.explanation-container.expanded .explanation {
    animation: explanationFadeIn 0.3s ease;
}

/* Ensure consistency with theme variables */
:root {
    --background-secondary: #f8f9fa;
    --border-color: #e0e0e0;
    --text-color: #333;
    --text-secondary: #555;
    --background-hover: rgba(67, 97, 238, 0.1);
}

[data-theme="dark"] {
    --background-secondary: #2a2a2a;
    --border-color: #444;
    --text-color: #e0e0e0;
    --text-secondary: #b0b0b0;
    --background-hover: rgba(76, 201, 240, 0.2);
}

[data-theme="minimal"] {
    --background-secondary: #f0f4f8;
    --border-color: #d0d4d8;
    --text-color: #2a2a2a;
    --text-secondary: #666;
    --background-hover: rgba(67, 97, 238, 0.05);
}
    </style>
</head>
<body data-theme="dark" data-progress="0">
    <header>
        <div class="logo">
            <i class="fas fa-brain logo-icon"></i>
            <span>MedQuiz</span>
        </div>
        <div class="header-controls">
            <button class="control-btn" id="theme-toggle" aria-label="Toggle theme">
                <i class="fas fa-moon"></i>
            </button>
            <button class="control-btn" id="sound-toggle" aria-label="Toggle sound">
                <i class="fas fa-volume-up"></i>
            </button>
            <button class="control-btn" id="stats-btn" aria-label="View statistics">
                <i class="fas fa-chart-line"></i>
                <span class="badge" id="bookmarks-count">0</span>
            </button>
        </div>
    </header>
    <main>
        <div class="quiz-container">
            <div class="quiz-header">
                <div>
                    <h1 class="quiz-title">MED QUIZ</h1>
                    <p class="quiz-subtitle">Test your medical knowledge</p>
                </div>
                <div class="stats-container">
                    <div class="stat">
                        <span class="stat-value" id="timer">00:00</span>
                        <span class="stat-label">Time</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="category">All</span>
                        <span class="stat-label">Category</span>
                    </div>
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar" style="width: 10%"></div>
            </div>
            <div class="question-meta">
                <div class="question-tags">
                    <span class="tag" id="category-tag">Biochemistry</span>
                    <span class="tag" id="difficulty-tag">
                        <span class="difficulty-indicator difficulty-medium"></span>
                        Medium
                    </span>
                </div>
                <button class="bookmark-btn" id="bookmark-btn" aria-label="Bookmark question">
                    <i class="fas fa-bookmark"></i>
                </button>
            </div>
            <div class="question-number">Question <span id="current-question">1</span> of <span id="total-questions">15</span></div>
            <div class="question-text" id="question">Which part of the brain is responsible for coordinating skeletal muscle contractions?</div>
            <div class="options-grid" id="options-container">
                <div class="option">
                    <div class="option-letter">A</div>
                    <div class="option-text">Cerebrum</div>
                </div>
                <div class="option">
                    <div class="option-letter">B</div>
                    <div class="option-text">Cerebellum</div>
                </div>
                <div class="option">
                    <div class="option-letter">C</div>
                    <div class="option-text">Pons</div>
                </div>
                <div class="option">
                    <div class="option-letter">D</div>
                    <div class="option-text">Midbrain</div>
                </div>
            </div>
            <div class="feedback correct" id="feedback" style="display: none;">
                <i class="fas fa-check-circle feedback-icon"></i>
                <div class="feedback-text">Correct! Well done.</div>
            </div>
            <button class="btn btn-secondary" id="show-explanation-btn" style="display: none;">
                <i class="fas fa-info-circle"></i> Show Explanation
            </button>
            <div class="explanation-container" id="explanation-container">
                <div class="explanation">
                    <div class="explanation-title">Explanation:</div>
                    <div id="explanation-text">The cerebellum, located posterior to the brainstem, is the 'little brain.' It compares intended movements with actual movements to ensure smooth, coordinated skeletal muscle activity and maintain posture and balance.</div>
                </div>
            </div>
            <div class="navigation">
                <button class="btn btn-secondary" id="prev-btn" disabled>
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button class="btn btn-primary" id="next-btn">
                    Next Question <i class="fas fa-arrow-right"></i>
                </button>
                <button class="btn btn-danger" id="skip-btn">
                    <i class="fas fa-forward"></i> Skip
                </button>
            </div>
        </div>
    </main>
    <div class="fab" id="quick-actions-btn" style="display: none;">
        <i class="fas fa-bolt"></i>
    </div>
    <div class="confetti-container" id="confetti-container"></div>
    <div class="modal-overlay" id="stats-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Your Statistics</h2>
                <button class="modal-close" id="close-stats-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card-value" id="modal-total-questions">0</div>
                        <div class="stat-card-label">Total Questions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value" id="modal-correct-answers">0</div>
                        <div class="stat-card-label">Correct Answers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value" id="modal-accuracy">0%</div>
                        <div class="stat-card-label">Accuracy</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value" id="modal-avg-time">0s</div>
                        <div class="stat-card-label">Avg. Time</div>
                    </div>
                </div>
                <h3 class="review-title">Performance by Category</h3>
                <div id="category-stats"></div>
                <h3 class="review-title mt-2">Performance by Difficulty</h3>
                <div id="difficulty-stats"></div>
                <h3 class="review-title mt-2">Quiz History</h3>
                <div id="history-stats"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="close-stats-btn">Close</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="quick-actions-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Quick Actions</h2>
                <button class="modal-close" id="close-actions-modal">&times;</button>
            </div>
            <div class="modal-body">
                <button class="btn btn-primary full-width mt-1" id="mark-for-review-btn">
                    <i class="fas fa-flag"></i> Mark for Review
                </button>
                <button class="btn btn-secondary full-width mt-1" id="view-explanation-btn">
                    <i class="fas fa-info-circle"></i> View Explanation
                </button>
                <button class="btn btn-success full-width mt-1" id="hint-btn">
                    <i class="fas fa-lightbulb"></i> Get a Hint
                </button>
                <button class="btn btn-danger full-width mt-1" id="report-question-btn">
                    <i class="fas fa-exclamation-triangle"></i> Report Question
                </button>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="close-actions-btn">Close</button>
            </div>
        </div>
    </div>
    <footer>
        &copy; 2025 MedQuiz | MED Practice Platform | All Rights Reserved
    </footer>
<script>
const questions = [
    {
        "id": 1,
        "question": "General properties of negative feedback include all of the following EXCEPT:",
        "options": [
            "It controls deviation from normal value",
            "It is the most commonly occurring",
            "It is a closed loop control system in which the output accelerates the control system",
            "The term negative is used because the effector response opposes the departure from the set point",
            "It often works towards homeostasis"
        ],
        "answer": 2,
        "correctAnswer": "It is a closed loop control system in which the output accelerates the control system",
        "explanation": "Negative feedback works to counteract or decelerate a change, bringing the system back to its set point. A system where the output accelerates the process is a positive feedback mechanism (e.g., childbirth, blood clotting).",
        "whyNotOtherOptions": {
            "a": "Controls deviation from normal value is a hallmark of negative feedback, stabilizing systems like body temperature.",
            "b": "Negative feedback is the most common control mechanism in physiology, unlike positive feedback.",
            "d": "The term 'negative' reflects the opposition to the initial change, a defining feature.",
            "e": "Negative feedback promotes homeostasis by maintaining stable conditions."
        },
        "relatedQuestions": ["80 (positive feedback)"],
        "category": "General Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 2,
        "question": "Which of the following is not the function of smooth endoplasmic reticulum?",
        "options": [
            "Protein synthesis",
            "Calcium storage in muscle cells",
            "Glycogen storage in liver cells",
            "Drug metabolism in hepatocytes",
            "Lipid synthesis"
        ],
        "answer": 2,
        "correctAnswer": "Glycogen storage in liver cells",
        "explanation": "The Smooth Endoplasmic Reticulum (SER) is involved in lipid synthesis, detoxification (drug metabolism), and calcium storage. Glycogen storage occurs in the cytoplasm as granules, not within the SER. Protein synthesis is the primary function of the Rough Endoplasmic Reticulum (RER).",
        "whyNotOtherOptions": {
            "a": "Protein synthesis occurs in the RER due to ribosome attachment, not the SER.",
            "b": "Calcium storage in muscle cells is a key SER function, especially in the sarcoplasmic reticulum.",
            "d": "Drug metabolism, particularly in hepatocytes, is a major SER role via cytochrome P450 enzymes.",
            "e": "Lipid synthesis, including steroids and phospholipids, is a primary SER function."
        },
        "relatedQuestions": ["24 (sarcoplasmic reticulum)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 3,
        "question": "The cell membrane is composed of:",
        "options": [
            "45% proteins and 55% carbohydrates",
            "55% proteins and 43% lipids",
            "55% lipids and 13% cholesterol",
            "45% proteins and 3% carbohydrates",
            "45% phospholipids and 13% Neutral fats"
        ],
        "answer": 3,
        "correctAnswer": "45% proteins and 3% carbohydrates",
        "explanation": "The cell membrane is primarily composed of proteins and lipids. The most widely accepted model (Fluid Mosaic Model) states it is about 55% protein, 43% lipids (phospholipids and cholesterol), and 2-10% carbohydrates.",
        "whyNotOtherOptions": {
            "a": "Carbohydrates are only 2-10% of the membrane, not 55%, which overestimates their proportion.",
            "b": "55% proteins is too high; proteins are closer to 45-50%, with lipids around 43%.",
            "c": "55% lipids is an overestimate, and cholesterol is a subset of lipids, not separate.",
            "e": "Neutral fats (triglycerides) are not a significant component of the cell membrane."
        },
        "relatedQuestions": ["5 (cell membrane structure)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 4,
        "question": "Which one of the following does not belong to the cell membrane proteins?",
        "options": [
            "Ion channels",
            "Na + K ATPase",
            "Carrier proteins",
            "Membrane receptor",
            "None of the above"
        ],
        "answer": 4,
        "correctAnswer": "None of the above",
        "explanation": "All the listed options—ion channels, Na+/K+ ATPase (a carrier protein), and membrane receptors—are types of proteins found within the cell membrane. Therefore, 'None of the above' is the correct choice.",
        "whyNotOtherOptions": {
            "a": "Ion channels are integral membrane proteins facilitating ion transport.",
            "b": "Na+/K+ ATPase is a carrier protein involved in active ion transport.",
            "c": "Carrier proteins transport specific molecules across the membrane.",
            "d": "Membrane receptors bind signaling molecules to initiate cellular responses."
        },
        "relatedQuestions": ["6 (Na+/K+ ATPase)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 5,
        "question": "Which of the following statements is correct about the structure of the cell membrane?",
        "options": [
            "Portions of the lipid bilayer that face the ECF and ICF are hydrophobic",
            "Polar molecules can easily pass through the lipid bilayer",
            "Protein channels within the lipid bilayer allow the passage of ions",
            "The polar heads of the lipid bilayer face each other in the interior of the cell",
            "None of the above"
        ],
        "answer": 2,
        "correctAnswer": "Protein channels within the lipid bilayer allow the passage of ions",
        "explanation": "Protein channels provide hydrophilic pathways for ions to cross the membrane. A is wrong: The portions facing the ECF and ICF are hydrophilic (water-loving). B is wrong: The lipid bilayer is hydrophobic internally, so polar molecules (like ions and glucose) cannot easily pass through; they need channels or carriers. D is wrong: The polar heads face the aqueous environments (ECF and ICF), while the hydrophobic tails face each other in the interior of the bilayer.",
        "whyNotOtherOptions": {
            "a": "The ECF and ICF-facing portions are hydrophilic, not hydrophobic.",
            "b": "Polar molecules require specific proteins for transport due to the hydrophobic core.",
            "d": "Polar heads face outward, not inward; hydrophobic tails form the interior.",
            "e": "Option C is correct, so 'none' is invalid."
        },
        "relatedQuestions": ["3 (cell membrane composition)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 6,
        "question": "Which of the following is true about the Na+K+ATPase?",
        "options": [
            "It is made up of five sub units",
            "Its alpha sub unit is facing the ECF and has binding site for Na+ ions",
            "Its ICF domain contains four binding sites",
            "The ICF domain has K+ ion binding sites",
            "ATPase binding site is on its ECF domain"
        ],
        "answer": 3,
        "correctAnswer": "The ICF domain has K+ ion binding sites",
        "explanation": "The Na+/K+ pump has binding sites for Na+ and ATP on the intracellular (ICF) side, and binding sites for K+ on the extracellular (ECF) side. It pumps 3 Na+ out and 2 K+ in per ATP molecule hydrolyzed.",
        "whyNotOtherOptions": {
            "a": "The pump typically has two main subunits (alpha and beta), not five.",
            "b": "The alpha subunit’s Na+ binding sites are on the ICF side, not ECF.",
            "c": "The pump binds 3 Na+ and 2 K+ ions, not four binding sites in total.",
            "e": "The ATP binding site is on the ICF domain, not the ECF."
        },
        "relatedQuestions": ["4 (membrane proteins)", "10 (secondary active transport)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 7,
        "question": "Which one of the following is false about facilitated diffusion?",
        "options": [
            "It requires carrier proteins to transport substances",
            "It needs ATP to transport substances",
            "It transports substances down their concentration gradient",
            "Carrier proteins are involved",
            "It is a saturable process"
        ],
        "answer": 1,
        "correctAnswer": "It needs ATP to transport substances",
        "explanation": "Facilitated diffusion, like simple diffusion, moves substances down their concentration gradient and does not require energy (ATP). The key difference is that it uses carrier or channel proteins, making it specific and saturable. Statement B is false because it confuses facilitated diffusion with active transport.",
        "whyNotOtherOptions": {
            "a": "Carrier proteins are essential for facilitated diffusion.",
            "c": "Movement down the concentration gradient is a defining feature.",
            "d": "Carrier proteins mediate transport, reinforcing option A.",
            "e": "Facilitated diffusion is saturable due to limited protein transporters."
        },
        "relatedQuestions": ["8 (osmosis)", "10 (secondary active transport)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 8,
        "question": "A mechanism by which water molecules are transported through the cell membrane is",
        "options": [
            "Osmosis",
            "Simple diffusion",
            "Facilitated diffusion",
            "Primary active transport",
            "Secondary active transport"
        ],
        "answer": 0,
        "correctAnswer": "Osmosis",
        "explanation": "Osmosis is the specific term for the net movement of water across a semi-permeable membrane from an area of low solute concentration to an area of high solute concentration. While water can also move slowly by simple diffusion through the lipid bilayer, osmosis is the primary mechanism, especially through aquaporin channels.",
        "whyNotOtherOptions": {
            "b": "Simple diffusion occurs for water but is less significant than osmosis via aquaporins.",
            "c": "Facilitated diffusion involves carriers or channels but is not the term for water movement.",
            "d": "Primary active transport uses ATP, not applicable to water movement.",
            "e": "Secondary active transport involves ion-coupled transport, not water alone."
        },
        "relatedQuestions": ["7 (facilitated diffusion)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 9,
        "question": "Which of the following substances is lipid–soluble?",
        "options": [
            "O2 and CO2",
            "Water",
            "Sodium and Potassium",
            "Glucose",
            "All"
        ],
        "answer": 0,
        "correctAnswer": "O2 and CO2",
        "explanation": "Small, non-polar, lipid-soluble molecules like O2 and CO2 can dissolve in and pass directly through the lipid bilayer of the cell membrane. Water, ions (Na+, K+), and glucose are polar or charged and require channels or carriers.",
        "whyNotOtherOptions": {
            "b": "Water is polar and primarily moves via osmosis through aquaporins.",
            "c": "Sodium and potassium are charged ions requiring channels or pumps.",
            "d": "Glucose is a polar molecule requiring facilitated diffusion via transporters.",
            "e": "Not all listed substances are lipid-soluble; only O2 and CO2 are."
        },
        "relatedQuestions": ["5 (cell membrane structure)", "7 (facilitated diffusion)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 10,
        "question": "Glucose and amino acids are absorbed from the GIT and reabsorbed from the renal tubules by:",
        "options": [
            "Simple diffusion",
            "Osmosis",
            "Secondary active transport",
            "Primary active transport",
            "None of the above"
        ],
        "answer": 2,
        "correctAnswer": "Secondary active transport",
        "explanation": "The absorption of glucose and amino acids in the gut and kidneys is typically coupled to the movement of sodium ions down their gradient. The energy for this process comes indirectly from the Na+/K+ ATPase, which maintains the sodium gradient. This is the definition of secondary active transport (specifically, symport).",
        "whyNotOtherOptions": {
            "a": "Simple diffusion does not require energy or transporters, unlike glucose/amino acid transport.",
            "b": "Osmosis is specific to water movement, not solutes like glucose.",
            "d": "Primary active transport uses ATP directly, not the sodium gradient.",
            "e": "Option C is correct, so 'none' is invalid."
        },
        "relatedQuestions": ["6 (Na+/K+ ATPase)", "7 (facilitated diffusion)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 11,
        "question": "Which one of the following is correct about total body water volume?",
        "options": [
            "Higher in females than in males",
            "Higher in adults than in infants",
            "Higher in obese people than in leans",
            "Higher in males than in females in adults",
            "Higher in olds than in adults"
        ],
        "answer": 3,
        "correctAnswer": "Higher in males than in females in adults",
        "explanation": "Total body water (TBW) as a percentage of body weight is higher in males (~60%) than in females (~50%) because females have a higher percentage of body fat, which is low in water. TBW is highest in infants (~75%) and decreases with age. Adipose tissue is relatively anhydrous, so obese individuals have a lower TBW percentage.",
        "whyNotOtherOptions": {
            "a": "Females have lower TBW due to higher body fat content.",
            "b": "Infants have higher TBW (75%) than adults (50-60%).",
            "c": "Obese individuals have lower TBW percentage due to more fat tissue.",
            "e": "Older adults have lower TBW due to reduced muscle mass."
        },
        "relatedQuestions": ["82 (fluid balance)"],
        "category": "General Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 12,
        "question": "Which electrolytes of the following are present at a higher concentration in the ECF than in the ICF?",
        "options": [
            "Na+, K+, Cl- and HCO3-",
            "K+, Cl-, SO42- and HCO3-",
            "Na+, Cl-, HCO3- and Ca2+",
            "K+, SO42-, Mg2+ and PO43-",
            "Ca2+, K+ and Na+"
        ],
        "answer": 2,
        "correctAnswer": "Na+, Cl-, HCO3- and Ca2+",
        "explanation": "The major ion in the Extracellular Fluid (ECF) is Sodium (Na+). Chloride (Cl-) and Bicarbonate (HCO3-) are also present in much higher concentrations in the ECF. The major ion in the Intracellular Fluid (ICF) is Potassium (K+), along with proteins, Mg2+, and PO43-.",
        "whyNotOtherOptions": {
            "a": "K+ is higher in ICF, not ECF.",
            "b": "K+ and SO42- are higher in ICF, not ECF.",
            "d": "K+, Mg2+, and PO43- are higher in ICF.",
            "e": "K+ is higher in ICF, not ECF."
        },
        "relatedQuestions": ["6 (Na+/K+ ATPase)", "11 (body water)"],
        "category": "General Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 13,
        "question": "Which one of the following represents an antiport carrier?",
        "options": [
            "Transport of glucose by facilitated diffusion",
            "Na+-K+ pump",
            "Na-glucose co-transporter",
            "Transport of O2 and CO2",
            "Osmosis"
        ],
        "answer": 1,
        "correctAnswer": "Na+-K+ pump",
        "explanation": "An antiport (or exchanger) moves two or more molecules in opposite directions across the membrane. The Na+/K+ ATPase pumps 3 Na+ out of the cell and 2 K+ into the cell, making it an antiport system (and also a primary active transporter). A Na-glucose co-transporter is a symport (same direction).",
        "whyNotOtherOptions": {
            "a": "Glucose facilitated diffusion uses carriers but not in an antiport mechanism.",
            "c": "Na-glucose co-transporter is a symport, moving both in the same direction.",
            "d": "O2 and CO2 move by simple diffusion, not via carriers.",
            "e": "Osmosis involves water movement, not carrier-mediated antiport."
        },
        "relatedQuestions": ["6 (Na+/K+ ATPase)", "10 (secondary active transport)"],
        "category": "Cell Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 14,
        "question": "Bipolar neurons are located in the",
        "options": [
            "Anterior horn of the gray matter of spinal cord",
            "Retina and inner ear",
            "Lateral horn of the gray matter of the spinal cord",
            "Posterior horn of the gray matter of the spinal cord",
            "Peripheral effector organs"
        ],
        "answer": 1,
        "correctAnswer": "Retina and inner ear",
        "explanation": "Bipolar neurons, which have one axon and one dendrite, are primarily found in special sensory organs like the retina (for vision) and the olfactory epithelium and inner ear (for hearing and balance). Motor neurons in the spinal cord are multipolar.",
        "whyNotOtherOptions": {
            "a": "Anterior horn contains multipolar motor neurons.",
            "c": "Lateral horn contains autonomic neurons, which are multipolar.",
            "d": "Posterior horn contains sensory neurons, often pseudo-unipolar.",
            "e": "Peripheral effector organs are innervated by multipolar neurons."
        },
        "relatedQuestions": ["15 (neurons and glia)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 15,
        "question": "Identify the correct statement from the following:",
        "options": [
            "Motor neurons transmit impulses from periphery to the CNS",
            "Microglia provides nutrients to neurons in the CNS",
            "Neuroglia are excitable cells",
            "Nerve insulators for both central and peripheral NS are the same",
            "None of the above"
        ],
        "answer": 4,
        "correctAnswer": "None of the above",
        "explanation": "A is wrong: Motor neurons transmit impulses from the CNS to the periphery. Sensory neurons do the opposite. B is wrong: Astrocytes provide nutrient support in the CNS. Microglia are the immune cells of the CNS. C is wrong: Neuroglia (glial cells) are non-excitable support cells. Neurons are the excitable cells. D is wrong: In the CNS, the myelin sheath is produced by oligodendrocytes. In the PNS, it's produced by Schwann cells.",
        "whyNotOtherOptions": {
            "a": "Motor neurons carry signals to muscles, not to the CNS.",
            "b": "Microglia are phagocytic, not nutrient providers; astrocytes support neurons.",
            "c": "Neuroglia support neurons but are not excitable.",
            "d": "CNS uses oligodendrocytes, PNS uses Schwann cells for myelination."
        },
        "relatedQuestions": ["14 (bipolar neurons)", "19 (Schwann cells)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 16,
        "question": "During the depolarization phase of an action potential",
        "options": [
            "Voltage gated Na channels are opened",
            "Voltage gated K channels opened",
            "Voltage gated Na channels are closed",
            "Ligand gated K channels are closed",
            "None of the above"
        ],
        "answer": 0,
        "correctAnswer": "Voltage gated Na channels are opened",
        "explanation": "Depolarization is triggered when a stimulus causes the membrane potential to reach threshold. This leads to the rapid opening of voltage-gated sodium channels, allowing Na+ to rush in, making the inside of the cell more positive. Voltage-gated K+ channels open later, during repolarization.",
        "whyNotOtherOptions": {
            "b": "K+ channels open during repolarization, not depolarization.",
            "c": "Na+ channels open, not close, during depolarization.",
            "d": "Ligand-gated K+ channels are not typically involved in action potentials.",
            "e": "Option A is correct, so 'none' is invalid."
        },
        "relatedQuestions": ["17 (action potential)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 17,
        "question": "Which one of the following is wrong about the action potential of the nerve fiber?",
        "options": [
            "It is caused by a transient membrane depolarization",
            "It needs a threshold stimulus to be generated",
            "It has a definite RMP",
            "It is all or none in its nature",
            "None of the above"
        ],
        "answer": 2,
        "correctAnswer": "It has a definite RMP",
        "explanation": "This question asks for the incorrect statement. The Resting Membrane Potential (RMP) is a property of the cell membrane before an action potential is generated. The action potential itself is the event (depolarization and repolarization). It is more accurate to say the cell at rest has a definite RMP. The action potential is an 'all-or-none' event that requires a threshold stimulus.",
        "whyNotOtherOptions": {
            "a": "Depolarization is the hallmark of an action potential.",
            "b": "A threshold stimulus is required to trigger an action potential.",
            "d": "The all-or-none nature is a key feature of action potentials.",
            "e": "Option C is incorrect, so 'none' is invalid."
        },
        "relatedQuestions": ["16 (depolarization)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 18,
        "question": "Fast rate conduction of nerve impulse is achieved in:",
        "options": [
            "Type A nerve fibers",
            "Type B nerve fibers",
            "Type C nerve fibers",
            "Autonomic nerve fibers",
            "Unmyelinated somatic nerve fibers"
        ],
        "answer": 0,
        "correctAnswer": "Type A nerve fibers",
        "explanation": "Type A fibers are the largest, heavily myelinated, and have the fastest conduction velocity (e.g., motor neurons and sensory neurons for proprioception). Type B are moderately myelinated (autonomic preganglionic), and Type C are small, unmyelinated, and very slow (autonomic postganglionic, pain).",
        "whyNotOtherOptions": {
            "b": "Type B fibers are slower than Type A due to less myelination.",
            "c": "Type C fibers are unmyelinated and slowest.",
            "d": "Autonomic fibers include Type B and C, which are slower.",
            "e": "Unmyelinated somatic fibers conduct impulses slowly."
        },
        "relatedQuestions": ["19 (myelin sheath)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 19,
        "question": "In the peripheral nerve fibers, the myelin sheath is produced by",
        "options": [
            "Schwann cells",
            "Oligodendrocytes",
            "Microglial cells",
            "Ependymal cells",
            "Astrocytes"
        ],
        "answer": 0,
        "correctAnswer": "Schwann cells",
        "explanation": "In the Peripheral Nervous System (PNS), Schwann cells wrap around axons to form the myelin sheath. In the Central Nervous System (CNS), this function is performed by oligodendrocytes.",
        "whyNotOtherOptions": {
            "b": "Oligodendrocytes myelinate axons in the CNS, not PNS.",
            "c": "Microglial cells are CNS immune cells, not myelin producers.",
            "d": "Ependymal cells line ventricles and produce CSF, not myelin.",
            "e": "Astrocytes support neurons but do not form myelin."
        },
        "relatedQuestions": ["15 (neuroglia)", "18 (nerve fibers)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 20,
        "question": "Which one of the following is wrong about the neuromuscular junction of the skeletal muscle?",
        "options": [
            "The neurotransmitter is always acetylcholine",
            "The post-synaptic receptor is always a nicotinic receptor",
            "An excitatory post-synaptic potential is always produced",
            "EPSP causes contraction",
            "All are correct"
        ],
        "answer": 4,
        "correctAnswer": "All are correct",
        "explanation": "This question asks for the incorrect statement. Statements A-D are all correct for the somatic neuromuscular junction. Therefore, 'All are correct' is a true statement, making it the wrong answer to a 'which is wrong' question. The trick is that E is the correct choice.",
        "whyNotOtherOptions": {
            "a": "Acetylcholine is the neurotransmitter at the skeletal neuromuscular junction.",
            "b": "Nicotinic receptors mediate fast synaptic transmission in skeletal muscle.",
            "c": "An EPSP is generated by ACh binding, depolarizing the muscle.",
            "d": "The EPSP triggers an action potential, leading to contraction."
        },
        "relatedQuestions": ["21 (neuromuscular junction)", "22 (neuromuscular blockers)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 21,
        "question": "An action potential arriving at the neuromuscular junction causes the opening of:",
        "options": [
            "Cl- channels",
            "Na+ channels",
            "Ca2+ channels",
            "K+ channels",
            "H+ channels"
        ],
        "answer": 2,
        "correctAnswer": "Ca2+ channels",
        "explanation": "When the action potential reaches the axon terminal, it causes voltage-gated calcium channels to open. The influx of Ca2+ into the terminal triggers the fusion of synaptic vesicles with the presynaptic membrane, releasing acetylcholine.",
        "whyNotOtherOptions": {
            "a": "Cl- channels are not primarily involved in neurotransmitter release.",
            "b": "Na+ channels drive the action potential but not vesicle release.",
            "d": "K+ channels contribute to repolarization, not transmitter release.",
            "e": "H+ channels are not relevant to neuromuscular transmission."
        },
        "relatedQuestions": ["20 (neuromuscular junction)", "22 (neuromuscular blockers)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 22,
        "question": "A drug that blocks the neuromuscular junction of the skeletal muscle is",
        "options": [
            "Neostigmine",
            "Carbachol",
            "Physostigmine",
            "D-tubocurarine",
            "Acetylcholine"
        ],
        "answer": 3,
        "correctAnswer": "D-tubocurarine",
        "explanation": "D-tubocurarine (curare) is a non-depolarizing neuromuscular blocker. It competitively antagonizes nicotinic acetylcholine receptors at the motor end-plate, preventing neurotransmission and causing paralysis. Neostigmine and physostigmine are acetylcholinesterase inhibitors that enhance the effect of ACh.",
        "whyNotOtherOptions": {
            "a": "Neostigmine enhances ACh effects by inhibiting acetylcholinesterase.",
            "b": "Carbachol is a cholinergic agonist, mimicking ACh.",
            "c": "Physostigmine also enhances ACh by inhibiting its breakdown.",
            "e": "Acetylcholine is the endogenous neurotransmitter, not a blocker."
        },
        "relatedQuestions": ["20 (neuromuscular junction)", "21 (Ca2+ channels)"],
        "category": "Neurophysiology",
        "difficulty": "Hard"
    },
    {
        "id": 23,
        "question": "Which of the following is not involved in the homeostasis of glucose?",
        "options": [
            "Liver",
            "Kidneys",
            "Brain",
            "Pancreas",
            "Lung"
        ],
        "answer": 4,
        "correctAnswer": "Lung",
        "explanation": "The liver (glycogen storage, gluconeogenesis), pancreas (insulin/glucagon secretion), and kidneys (glucose filtration and reabsorption, gluconeogenesis) are central to glucose homeostasis. The brain is a major consumer of glucose but does not regulate its blood concentration. The lungs are not directly involved in glucose metabolism.",
        "whyNotOtherOptions": {
            "a": "Liver stores glycogen and performs gluconeogenesis.",
            "b": "Kidneys reabsorb glucose and contribute to gluconeogenesis.",
            "c": "Brain consumes glucose but does not regulate its levels.",
            "d": "Pancreas secretes insulin and glucagon to control blood glucose."
        },
        "relatedQuestions": ["10 (glucose transport)", "52 (renal glucose reabsorption)"],
        "category": "General Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 24,
        "question": "The function of T-tubules in the skeletal muscle fibers is",
        "options": [
            "Storage of Calcium ions",
            "Conduction of depolarization waves to the sarcoplasmic reticulum",
            "Contain post-synaptic receptors",
            "Storage of neurotransmitters",
            "None of the above"
        ],
        "answer": 1,
        "correctAnswer": "Conduction of depolarization waves to the sarcoplasmic reticulum",
        "explanation": "Transverse tubules (T-tubules) are invaginations of the sarcolemma that penetrate deep into the muscle fiber. Their key role is to rapidly conduct the action potential (depolarization) into the interior of the cell, which triggers the release of Ca2+ from the adjacent sarcoplasmic reticulum.",
        "whyNotOtherOptions": {
            "a": "Calcium is stored in the sarcoplasmic reticulum, not T-tubules.",
            "c": "Post-synaptic receptors are at the neuromuscular junction, not T-tubules.",
            "d": "Neurotransmitters are stored in presynaptic vesicles, not T-tubules.",
            "e": "Option B is correct, so 'none' is invalid."
        },
        "relatedQuestions": ["2 (sarcoplasmic reticulum)", "26 (contractile proteins)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 25,
        "question": "One of the following is specific to that muscle fiber except:",
        "options": [
            "Depends on aerobic metabolism",
            "Contains a large number of sarcomeres",
            "Rich in capillary supply",
            "Has multiple nuclei",
            "Contains a lot of myoglobin"
        ],
        "answer": 3,
        "correctAnswer": "Has multiple nuclei",
        "explanation": "All skeletal muscle fibers are multinucleated (D) and contain sarcomeres (B). High dependence on aerobic metabolism (A), rich capillary supply (C), and high myoglobin content (E) are characteristic of slow-twitch (Type I) fibers. Therefore, a feature not exclusive to them (like being multinucleated) is the 'except' answer.",
        "whyNotOtherOptions": {
            "a": "Aerobic metabolism is specific to Type I (slow-twitch) fibers.",
            "b": "Sarcomeres are present in all skeletal muscle fibers but not specific.",
            "c": "Rich capillary supply is characteristic of Type I fibers.",
            "e": "High myoglobin is specific to Type I fibers for oxygen storage."
        },
        "relatedQuestions": ["26 (contractile proteins)", "27 (sarcomere)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 26,
        "question": "The principal contractile proteins in the skeletal muscle are:",
        "options": [
            "Actin and troponin",
            "Actin and myosin",
            "Troponin and tropomyosin",
            "Myosin and tropomyosin",
            "Actin and tropomyosin"
        ],
        "answer": 1,
        "correctAnswer": "Actin and myosin",
        "explanation": "The thin filament is primarily composed of actin, along with the regulatory proteins troponin and tropomyosin. The thick filament is composed of myosin. The direct interaction between actin and myosin generates the force for muscle contraction.",
        "whyNotOtherOptions": {
            "a": "Troponin is regulatory, not contractile.",
            "c": "Troponin and tropomyosin are regulatory, not contractile.",
            "d": "Tropomyosin regulates contraction, not a contractile protein.",
            "e": "Tropomyosin is regulatory, not contractile."
        },
        "relatedQuestions": ["24 (T-tubules)", "27 (sarcomere)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 27,
        "question": "The contractile unit of the skeletal muscle is:",
        "options": [
            "The sarcomere",
            "The A-bands",
            "The I-bands",
            "The Z-lines",
            "The H-bands"
        ],
        "answer": 0,
        "correctAnswer": "The sarcomere",
        "explanation": "The sarcomere is defined as the segment between two successive Z-lines and is the fundamental, repeating contractile unit of a myofibril.",
        "whyNotOtherOptions": {
            "b": "A-bands represent the length of myosin filaments, not the contractile unit.",
            "c": "I-bands contain actin filaments, not the entire unit.",
            "d": "Z-lines anchor sarcomeres but are not the contractile unit.",
            "e": "H-bands are the central region of A-bands, not the contractile unit."
        },
        "relatedQuestions": ["25 (muscle fiber)", "26 (contractile proteins)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 28,
        "question": "Which of the following statements is wrong about muscle tissue?",
        "options": [
            "Cardiac and skeletal muscles have a striated appearance",
            "Cardiac and smooth muscles are involuntary",
            "Skeletal and cardiac muscles are innervated by the ANS",
            "Cardiac and smooth muscles are innervated by ANS"
        ],
        "answer": 2,
        "correctAnswer": "Skeletal and cardiac muscles are innervated by the ANS",
        "explanation": "A is correct: Both cardiac and skeletal muscle appear striated. B is correct: Both are involuntary. C is wrong: Skeletal muscle is innervated by the somatic nervous system, not the autonomic nervous system (ANS). Cardiac and smooth muscle are innervated by the ANS. D is correct.",
        "whyNotOtherOptions": {
            "a": "Striations are due to sarcomere organization in both muscle types.",
            "b": "Cardiac and smooth muscles are not under voluntary control.",
            "d": "ANS innervation is correct for cardiac and smooth muscles."
        },
        "relatedQuestions": ["20 (neuromuscular junction)", "33 (ANS innervation)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 29,
        "question": "Which of the following events is energy independent?",
        "options": [
            "Release of Ca2+ from the sarcoplasmic reticulum",
            "Return of Ca2+ back to the sarcoplasmic reticulum",
            "The movement of myosin head to the center",
            "Detachment of myosin head from actin",
            "Final ionic rearrangement"
        ],
        "answer": 3,
        "correctAnswer": "Detachment of myosin head from actin",
        "explanation": "The detachment of the myosin head from actin requires the binding of a new ATP molecule. However, the energy is not used for the detachment itself; detachment is a consequence of ATP binding. The actual power stroke (myosin head movement) uses energy from ATP hydrolysis. The most energy-independent step listed is the detachment triggered by ATP binding. The return of Ca2+ (B) requires active transport (ATP-dependent).",
        "whyNotOtherOptions": {
            "a": "Ca2+ release is triggered by voltage changes but indirectly relies on energy.",
            "b": "Ca2+ reuptake requires ATP-dependent pumps in the sarcoplasmic reticulum.",
            "c": "Myosin head movement (power stroke) uses ATP hydrolysis energy.",
            "e": "Ionic rearrangement is vague but typically energy-dependent."
        },
        "relatedQuestions": ["24 (T-tubules)", "26 (contractile proteins)"],
        "category": "Muscle Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 30,
        "question": "Which of the following cranial nerves is stimulatory to the salivary glands?",
        "options": [
            "Oculomotor",
            "Facial",
            "Vagus",
            "Trigeminal",
            "Hypoglossal"
        ],
        "answer": 1,
        "correctAnswer": "Facial",
        "explanation": "The Facial (VII) and Glossopharyngeal (IX) nerves provide parasympathetic innervation to the salivary glands, stimulating saliva production. The Facial nerve innervates the submandibular and sublingual glands, while the Glossopharyngeal nerve innervates the parotid gland.",
        "whyNotOtherOptions": {
            "a": "Oculomotor (III) innervates eye muscles, not salivary glands.",
            "c": "Vagus (X) innervates visceral organs, not salivary glands.",
            "d": "Trigeminal (V) provides sensory innervation, not parasympathetic.",
            "e": "Hypoglossal (XII) controls tongue muscles, not glands."
        },
        "relatedQuestions": ["60 (salivary amylase)"],
        "category": "Autonomic Nervous System",
        "difficulty": "Hard"
    },
    {
        "id": 31,
        "question": "Which one of the following is not an effect of sympathetic stimulation on the cardiovascular system?",
        "options": [
            "Increased heart rate",
            "Increased force of contraction of the cardiac muscle",
            "Vasoconstriction of the systemic blood vessels",
            "Increases cardiac output",
            "Vasodilation of coronary arteries"
        ],
        "answer": 4,
        "correctAnswer": "Vasodilation of coronary arteries",
        "explanation": "Options A, B, C, and D are classic sympathetic effects. Increased heart rate, contractility, and vasoconstriction increase cardiac output. However, vasodilation of coronary arteries is primarily mediated by local metabolic factors (e.g., adenosine) rather than direct sympathetic stimulation, though beta-2 receptors can contribute.",
        "whyNotOtherOptions": {
            "a": "Sympathetic stimulation increases heart rate via beta-1 receptors.",
            "b": "Increased contractility is a beta-1 effect.",
            "c": "Vasoconstriction occurs via alpha-1 receptors in most vessels.",
            "d": "Cardiac output increases due to heart rate and contractility."
        },
        "relatedQuestions": ["32 (coronary receptors)", "33 (ANS innervation)"],
        "category": "Autonomic Nervous System",
        "difficulty": "Hard"
    },
    {
        "id": 32,
        "question": "The receptor that is found on the coronary arteries is",
        "options": [
            "Alpha 1",
            "Beta 1",
            "Alpha 2",
            "Beta 2"
        ],
        "answer": 3,
        "correctAnswer": "Beta 2",
        "explanation": "Sympathetic stimulation causes vasoconstriction via alpha-1 receptors in most blood vessels. However, in coronary and skeletal muscle arteries, beta-2 receptors dominate, leading to vasodilation to increase blood flow during exercise.",
        "whyNotOtherOptions": {
            "a": "Alpha-1 receptors cause vasoconstriction, not typical in coronaries.",
            "b": "Beta-1 receptors are primarily on the heart, increasing rate and force.",
            "c": "Alpha-2 receptors inhibit neurotransmitter release, not vasodilation."
        },
        "relatedQuestions": ["31 (sympathetic effects)", "33 (ANS innervation)"],
        "category": "Autonomic Nervous System",
        "difficulty": "Hard"
    },
    {
        "id": 33,
        "question": "Of the following, one does not receive dual autonomic innervation. Identify:",
        "options": [
            "The heart",
            "The blood vessels",
            "The liver",
            "The stomach",
            "Pancreas"
        ],
        "answer": 1,
        "correctAnswer": "The blood vessels",
        "explanation": "Most organs receive dual innervation from both the sympathetic and parasympathetic systems (e.g., heart, GI tract, liver, pancreas). However, most blood vessels (especially those in the skin and abdominal viscera) are primarily innervated only by sympathetic nerves, which regulate their diameter.",
        "whyNotOtherOptions": {
            "a": "Heart receives sympathetic (beta-1) and parasympathetic (vagal) innervation.",
            "c": "Liver has both sympathetic and parasympathetic innervation.",
            "d": "Stomach receives vagal (parasympathetic) and sympathetic innervation.",
            "e": "Pancreas has dual innervation for secretion regulation."
        },
        "relatedQuestions": ["31 (sympathetic effects)", "32 (coronary receptors)"],
        "category": "Autonomic Nervous System",
        "difficulty": "Hard"
    },
    {
        "id": 34,
        "question": "A neurotransmitter produced by a postganglionic sympathetic fiber to the sweat glands is",
        "options": [
            "Acetylcholine",
            "Adrenaline",
            "Noradrenaline",
            "Dopamine"
        ],
        "answer": 0,
        "correctAnswer": "Acetylcholine",
        "explanation": "This is a key exception to the rule. While most postganglionic sympathetic fibers release norepinephrine, the fibers innervating sweat glands are cholinergic (they release acetylcholine), acting on muscarinic receptors.",
        "whyNotOtherOptions": {
            "b": "Adrenaline (epinephrine) is released by the adrenal medulla, not fibers.",
            "c": "Noradrenaline is typical for most sympathetic fibers, not sweat glands.",
            "d": "Dopamine is not a primary neurotransmitter in sympathetic fibers."
        },
        "relatedQuestions": ["35 (ANS neurotransmitters)"],
        "category": "Autonomic Nervous System",
        "difficulty": "Hard"
    },
    {
        "id": 35,
        "question": "Which one of the following is wrong about neuronal activities of the ANS?",
        "options": [
            "All preganglionic fibers are cholinergic",
            "Postganglionic parasympathetic fibers are cholinergic",
            "Preganglionic parasympathetic fibers are cholinergic",
            "Most postganglionic sympathetic fibers are adrenergic",
            "None of the above"
        ],
        "answer": 4,
        "correctAnswer": "None of the above",
        "explanation": "Statements A, B, C, and D are all correct descriptions of ANS neurochemistry. Therefore, 'None of the above' (meaning none are wrong) is the correct answer.",
        "whyNotOtherOptions": {
            "a": "All preganglionic fibers (sympathetic and parasympathetic) release ACh.",
            "b": "Postganglionic parasympathetic fibers are indeed cholinergic.",
            "c": "Preganglionic parasympathetic fibers release ACh, as in A.",
            "d": "Most postganglionic sympathetic fibers release norepinephrine (adrenergic)."
        },
        "relatedQuestions": ["34 (sweat gland neurotransmitter)"],
        "category": "Autonomic Nervous System",
        "difficulty": "Hard"
    },
    {
        "id": 36,
        "question": "Which one of the following is an acetylcholine drug?",
        "options": [
            "Propranolol",
            "Metoprolol",
            "Atropine",
            "Neostigmine",
            "Pilocarpine"
        ],
        "answer": 3,
        "correctAnswer": "Neostigmine",
        "explanation": "Propranolol & Metoprolol are beta-blockers (antagonists). Atropine is a muscarinic antagonist. Neostigmine is an acetylcholinesterase inhibitor (indirectly increases ACh). Pilocarpine is a direct muscarinic receptor agonist.",
        "whyNotOtherOptions": {
            "a": "Propranolol is a beta-adrenergic antagonist, not cholinergic.",
            "b": "Metoprolol is a beta-1 antagonist, not related to ACh.",
            "c": "Atropine blocks muscarinic receptors, opposing ACh action.",
            "e": "Pilocarpine is a muscarinic agonist, not an ACh-enhancing drug like Neostigmine."
        },
        "relatedQuestions": ["22 (neuromuscular blockers)", "37 (sympathomimetics)"],
        "category": "Autonomic Nervous System",
        "difficulty": "Hard"
    },
    {
        "id": 37,
        "question": "Which of the following is not a sympathomimetic drug?",
        "options": [
            "Epinephrine",
            "Norepinephrine",
            "Methoxamine",
            "Pilocarpine"
        ],
        "answer": 3,
        "correctAnswer": "Pilocarpine",
        "explanation": "Sympathomimetic drugs mimic the effects of the sympathetic nervous system (e.g., epinephrine, norepinephrine, methoxamine). Pilocarpine is a parasympathomimetic drug (it mimics acetylcholine at muscarinic receptors).",
        "whyNotOtherOptions": {
            "a": "Epinephrine mimics sympathetic effects via adrenergic receptors.",
            "b": "Norepinephrine is a sympathetic neurotransmitter and agonist.",
            "c": "Methoxamine is an alpha-1 agonist, a sympathomimetic."
        },
        "relatedQuestions": ["36 (acetylcholine drugs)"],
        "category": "Autonomic Nervous System",
        "difficulty": "Hard"
    },
    {
        "id": 38,
        "question": "Which of the following cranial nerves is responsible for corneal sensitivity?",
        "options": [
            "Glossopharyngeal nerve",
            "Trochlear nerve",
            "Trigeminal nerve",
            "Abducens nerve",
            "Oculomotor nerve"
        ],
        "answer": 2,
        "correctAnswer": "Trigeminal nerve",
        "explanation": "The Trigeminal nerve (V), specifically its ophthalmic division (V1), provides sensory innervation to the cornea (corneal reflex).",
        "whyNotOtherOptions": {
            "a": "Glossopharyngeal (IX) innervates the pharynx and tongue, not the cornea.",
            "b": "Trochlear (IV) controls eye muscle movement, not sensation.",
            "d": "Abducens (VI) controls eye abduction, not sensory function.",
            "e": "Oculomotor (III) controls eye muscles and pupil, not corneal sensation."
        },
        "relatedQuestions": ["30 (facial nerve)"],
        "category": "Special Senses",
        "difficulty": "Hard"
    },
    {
        "id": 39,
        "question": "Mechanism of action of acetylcholine when binding with M1 is via",
        "options": [
            "Formation of IP3 and DAG",
            "Activation of adenyl cyclase",
            "Hyperpolarization",
            "Opening Na+ channels",
            "Inhibition of Ca2+ channels"
        ],
        "answer": 0,
        "correctAnswer": "Formation of IP3 and DAG",
        "explanation": "Odd-numbered muscarinic receptors (M1, M3, M5) are coupled to Gq proteins. Their activation stimulates phospholipase C, which leads to the formation of Inositol Trisphosphate (IP3) and Diacylglycerol (DAG). Even-numbered receptors (M2, M4) are Gi-coupled and inhibit adenylate cyclase.",
        "whyNotOtherOptions": {
            "b": "Adenyl cyclase activation is linked to Gs proteins, not M1 receptors.",
            "c": "Hyperpolarization is typical of M2 receptors, not M1.",
            "d": "Na+ channel opening is associated with nicotinic receptors, not muscarinic.",
            "e": "Ca2+ channel inhibition is not a primary M1 mechanism."
        },
        "relatedQuestions": ["36 (acetylcholine drugs)"],
        "category": "Autonomic Nervous System",
        "difficulty": "Hard"
    },
    {
        "id": 40,
        "question": "If your tongue is atrophied, there is a lesion in which cranial nerve?",
        "options": [
            "Facial",
            "Glossopharyngeal",
            "Vagus",
            "Hypoglossal",
            "Trigeminal"
        ],
        "answer": 3,
        "correctAnswer": "Hypoglossal",
        "explanation": "The Hypoglossal nerve (XII) is the motor nerve controlling the muscles of the tongue. A lesion would lead to weakness and eventual atrophy on the affected side.",
        "whyNotOtherOptions": {
            "a": "Facial (VII) controls facial muscles, not tongue muscles.",
            "b": "Glossopharyngeal (IX) provides sensory and some motor to the pharynx.",
            "c": "Vagus (X) innervates visceral organs and pharynx, not tongue muscles.",
            "e": "Trigeminal (V) provides sensory innervation to the face, not motor to the tongue."
        },
        "relatedQuestions": ["38 (trigeminal nerve)"],
        "category": "Special Senses",
        "difficulty": "Hard"
    },
    {
        "id": 41,
        "question": "The work of breathing decreases when:",
        "options": [
            "Lung compliance increases",
            "The subject exercises",
            "The rate of breathing increases with constant minute volume",
            "The person lies down",
            "Functional residual capacity increases"
        ],
        "answer": 0,
        "correctAnswer": "Lung compliance increases",
        "explanation": "Compliance is the ease with which the lungs can be stretched. Higher compliance means the lungs expand more easily for a given change in pressure, which decreases the work of breathing. Exercise, rapid shallow breathing, and lying down (which reduces FRC) typically increase the work of breathing.",
        "whyNotOtherOptions": {
            "b": "Exercise increases metabolic demand, raising breathing work.",
            "c": "Rapid breathing increases resistance, increasing work.",
            "d": "Lying down reduces lung volume, increasing work.",
            "e": "Increased FRC may not reduce work; compliance is key."
        },
        "relatedQuestions": ["42 (surfactant and compliance)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 42,
        "question": "Lack of surfactant substances as occur in infants with respiratory distress syndrome (RDS) results in:",
        "options": [
            "An increased lung compliance",
            "Stabilization of alveolar volume",
            "Lung collapse (atelectasis)",
            "A reduced alveolar-arterial O2 tension difference"
        ],
        "answer": 2,
        "correctAnswer": "Lung collapse (atelectasis)",
        "explanation": "Surfactant reduces surface tension in the alveoli, preventing them from collapsing at the end of expiration. A lack of surfactant dramatically increases surface tension, leading to difficult inflation and widespread atelectasis (lung collapse).",
        "whyNotOtherOptions": {
            "a": "Lack of surfactant decreases compliance, making lungs stiffer.",
            "b": "Without surfactant, alveoli are unstable and collapse.",
            "d": "Lack of surfactant increases the O2 tension difference due to poor gas exchange."
        },
        "relatedQuestions": ["41 (lung compliance)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 43,
        "question": "The volumes and capacities that cannot be measured by direct spirometry include:",
        "options": [
            "Residual volume, expiratory reserve volume and inspiratory capacity",
            "Residual volume, Functional residual capacity and total lung capacity",
            "Inspiratory reserve volume, residual volume vital capacity",
            "Total lung capacity, residual volume and expiratory reserve volume",
            "Tidal volume, inspiratory reserve volume and inspiratory capacity"
        ],
        "answer": 1,
        "correctAnswer": "Residual volume, Functional residual capacity and total lung capacity",
        "explanation": "Spirometry can only measure air that can be inhaled or exhaled. The Residual Volume (RV), the air left in the lungs after a maximal exhalation, cannot be measured by simple spirometry. Any capacity that includes the RV (Functional Residual Capacity - FRC and Total Lung Capacity - TLC) also cannot be measured by direct spirometry and requires other techniques like helium dilution.",
        "whyNotOtherOptions": {
            "a": "Expiratory reserve volume and inspiratory capacity are measurable by spirometry.",
            "c": "Inspiratory reserve volume and vital capacity are measurable.",
            "d": "Expiratory reserve volume is measurable, unlike RV and TLC.",
            "e": "Tidal volume, inspiratory reserve volume, and inspiratory capacity are all measurable."
        },
        "relatedQuestions": ["44 (total lung capacity)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 44,
        "question": "The total lung capacity consists of:",
        "options": [
            "Vital capacity & tidal volume",
            "Residual volume & vital capacity",
            "Functional residual capacity & vital capacity",
            "Tidal volume & functional residual capacity",
            "Tidal volume & residual volume"
        ],
        "answer": 1,
        "correctAnswer": "Residual volume & vital capacity",
        "explanation": "Total Lung Capacity (TLC) is the total amount of air in the lungs after a maximal inspiration. It is the sum of the Vital Capacity (VC) (the maximum amount that can be exhaled) and the Residual Volume (RV) (the amount that cannot be exhaled). TLC = VC + RV.",
        "whyNotOtherOptions": {
            "a": "Tidal volume is part of vital capacity, not additive to it.",
            "c": "FRC includes RV, which overlaps with VC, making it incorrect.",
            "d": "Tidal volume and FRC do not sum to TLC.",
            "e": "Tidal volume and RV are incomplete components of TLC."
        },
        "relatedQuestions": ["43 (spirometry)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 45,
        "question": "All of the following events occur during expiration except:",
        "options": [
            "Inspiratory muscles relax and the rib cage descends due to gravity",
            "Thoracic cavity volume decreases",
            "Intrapulmonary volume decreases",
            "Intrapulmonary pressure rises above atmospheric pressure (+1 mm Hg)",
            "Gases flow out of the lungs against the pressure gradient"
        ],
        "answer": 4,
        "correctAnswer": "Gases flow out of the lungs against the pressure gradient",
        "explanation": "During quiet expiration, gases flow down a pressure gradient, from an area of higher pressure in the lungs to an area of lower atmospheric pressure. They do not flow against a gradient. Statements A-D correctly describe passive expiration.",
        "whyNotOtherOptions": {
            "a": "Relaxation of inspiratory muscles causes the rib cage to descend.",
            "b": "Thoracic volume decreases, driving expiration.",
            "c": "Intrapulmonary volume decreases with thoracic volume.",
            "d": "Pressure rises slightly above atmospheric, aiding gas outflow."
        },
        "relatedQuestions": ["41 (work of breathing)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 46,
        "question": "Defense function of the respiratory system is:",
        "options": [
            "Gas moistening",
            "Ciliary beating",
            "Warming of the air",
            "Smell",
            "Secretion of ACE"
        ],
        "answer": 1,
        "correctAnswer": "Ciliary beating",
        "explanation": "While A, C, and B are functions of the respiratory system, ciliary beating is a specific defense mechanism that helps clear mucus and trapped particles from the airways (the mucociliary escalator). Secretion of ACE is a metabolic function.",
        "whyNotOtherOptions": {
            "a": "Gas moistening conditions air but is not a defense mechanism.",
            "c": "Warming air prevents tissue damage but is not defensive.",
            "d": "Smell is a sensory function, not defensive.",
            "e": "ACE secretion is metabolic, not a defense mechanism."
        },
        "relatedQuestions": ["47 (respiratory zone)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 47,
        "question": "Which structure of the following does not belong to the respiratory portion of the breathing organ?",
        "options": [
            "Terminal bronchioles",
            "Respiratory bronchioles",
            "Alveolar ducts",
            "Alveolar sacs",
            "None of the above"
        ],
        "answer": 0,
        "correctAnswer": "Terminal bronchioles",
        "explanation": "The respiratory system is divided into the conducting zone (transports air, no gas exchange) and the respiratory zone (where gas exchange occurs). The terminal bronchiole is the last part of the conducting zone. The respiratory zone begins with the respiratory bronchioles, followed by alveolar ducts and sacs.",
        "whyNotOtherOptions": {
            "b": "Respiratory bronchioles are part of the respiratory zone.",
            "c": "Alveolar ducts facilitate gas exchange, part of the respiratory zone.",
            "d": "Alveolar sacs are the sites of gas exchange.",
            "e": "Option A is correct, so 'none' is invalid."
        },
        "relatedQuestions": ["46 (mucociliary escalator)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 48,
        "question": "Bronchial obstruction is likely to be relieved by",
        "options": [
            "Stimulation of cholinergic receptors",
            "Stimulation of beta adrenoceptors",
            "Histamine",
            "Stimulation of mast cell membranes",
            "Slow reactive substance of anaphylaxis"
        ],
        "answer": 1,
        "correctAnswer": "Stimulation of beta adrenoceptors",
        "explanation": "Bronchial smooth muscle has beta-2 adrenergic receptors. Stimulation of these receptors causes bronchodilation, which relieves obstruction. Cholinergic stimulation, histamine, and leukotrienes (slow reactive substance) all cause bronchoconstriction.",
        "whyNotOtherOptions": {
            "a": "Cholinergic stimulation causes bronchoconstriction via muscarinic receptors.",
            "c": "Histamine triggers bronchoconstriction in allergic responses.",
            "d": "Mast cell stimulation releases histamine, causing constriction.",
            "e": "Slow reactive substances (leukotrienes) cause bronchoconstriction."
        },
        "relatedQuestions": ["32 (beta-2 receptors)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 49,
        "question": "Respiratory function of the respiratory system is:",
        "options": [
            "Acid base balance",
            "Air conditioning",
            "Phonation",
            "Gas conduction",
            "Olfaction"
        ],
        "answer": 3,
        "correctAnswer": "Gas conduction",
        "explanation": "The primary respiratory function is gas exchange, which requires the conduction of gas to the alveoli. The other options are secondary functions (A, B, C) or a special sense (E).",
        "whyNotOtherOptions": {
            "a": "Acid-base balance is a secondary function via CO2 regulation.",
            "b": "Air conditioning (warming, humidifying) supports gas exchange.",
            "c": "Phonation is a secondary function using exhaled air.",
            "e": "Olfaction is a sensory function, not respiratory."
        },
        "relatedQuestions": ["47 (respiratory zone)"],
        "category": "Respiratory Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 50,
        "question": "The amount of fluid filtered per minute in all nephrons of both kidneys is called:",
        "options": [
            "Glomerular filtration rate (GFR)",
            "Filtration fraction",
            "Filtration pressure",
            "Renal blood flow",
            "Tubular transport maximum"
        ],
        "answer": 0,
        "correctAnswer": "Glomerular filtration rate (GFR)",
        "explanation": "The Glomerular Filtration Rate (GFR) is defined as the volume of fluid filtered from the glomerular capillaries into Bowman's capsule per unit time (typically 125 mL/min).",
        "whyNotOtherOptions": {
            "b": "Filtration fraction is the ratio of GFR to renal plasma flow.",
            "c": "Filtration pressure is the net force driving filtration, not volume.",
            "d": "Renal blood flow is the total blood to the kidneys, not filtrate.",
            "e": "Tubular transport maximum is the limit of reabsorption, not filtration."
        },
        "relatedQuestions": ["51 (filtration pressure)", "55 (GFR regulation)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 51,
        "question": "The net pressure in the glomerular capillaries that pushes fluid outward is called",
        "options": [
            "Glomerular capillary pressure",
            "Glomerular colloid osmotic capillary pressure",
            "Bowman’s capsular pressure",
            "Filtration pressure",
            "Mean systemic capillary filling pressure"
        ],
        "answer": 3,
        "correctAnswer": "Filtration pressure",
        "explanation": "The Net Filtration Pressure (NFP) is the sum of forces favoring and opposing filtration. It is calculated as: NFP = Glomerular Hydrostatic Pressure - (Bowman's Capsular Pressure + Glomerular Colloid Osmotic Pressure). It is the net effective pressure driving filtration.",
        "whyNotOtherOptions": {
            "a": "Glomerular capillary pressure is one component, not the net pressure.",
            "b": "Colloid osmotic pressure opposes filtration, not the net force.",
            "c": "Bowman’s capsular pressure also opposes filtration.",
            "e": "Systemic capillary pressure is unrelated to glomerular filtration."
        },
        "relatedQuestions": ["50 (GFR)", "57 (GFR factors)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 52,
        "question": "Part of the renal tubules where nutritionally important substances are reabsorbed is called",
        "options": [
            "Collecting duct",
            "Proximal tubules",
            "Distal tubules",
            "Loop of Henle",
            "Urinary bladder"
        ],
        "answer": 1,
        "correctAnswer": "Proximal tubules",
        "explanation": "The Proximal Convoluted Tubule (PCT) is the primary site for the reabsorption of most nutrients (glucose, amino acids, vitamins), ions, and water. It is responsible for the reabsorption of about 65% of the filtered load.",
        "whyNotOtherOptions": {
            "a": "Collecting duct primarily regulates water and electrolyte balance.",
            "c": "Distal tubules fine-tune ion and water reabsorption.",
            "d": "Loop of Henle concentrates urine but reabsorbs fewer nutrients.",
            "e": "Urinary bladder stores urine, not involved in reabsorption."
        },
        "relatedQuestions": ["10 (glucose transport)", "53 (renal threshold)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 53,
        "question": "The renal threshold for glucose is equal to",
        "options": [
            "340 mg/ml",
            "200 mg/dl",
            "125 ml/min",
            "80-120 mg/dl",
            "40 mg/dl"
        ],
        "answer": 1,
        "correctAnswer": "200 mg/dl",
        "explanation": "The renal threshold is the plasma concentration at which a substance first appears in the urine. For glucose, this is approximately 180-200 mg/dL. When the plasma glucose level exceeds this threshold, the transporters (SGLT) in the proximal tubule are saturated, and glucosuria occurs.",
        "whyNotOtherOptions": {
            "a": "340 mg/ml is an incorrect unit and far too high.",
            "c": "125 ml/min is the GFR, not a concentration threshold.",
            "d": "80-120 mg/dl is below the threshold for glucosuria.",
            "e": "40 mg/dl is far below the threshold."
        },
        "relatedQuestions": ["52 (proximal tubules)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 54,
        "question": "Renal tubules upon which ADH and aldosterone act to promote water-electrolyte reabsorption are/is",
        "options": [
            "Distal tubules and collecting duct",
            "Proximal tubules",
            "Loop of Henle",
            "Glomerulus",
            "Afferent and efferent arterioles"
        ],
        "answer": 0,
        "correctAnswer": "Distal tubules and collecting duct",
        "explanation": "Aldosterone acts on the principal cells of the distal convoluted tubule (DCT) and collecting duct to increase Na+ reabsorption and K+ secretion. Antidiuretic Hormone (ADH) acts on the collecting duct to increase water permeability, promoting water reabsorption.",
        "whyNotOtherOptions": {
            "b": "Proximal tubules reabsorb nutrients but are not primary targets for ADH or aldosterone.",
            "c": "Loop of Henle concentrates urine but is not directly regulated by these hormones.",
            "d": "Glomerulus filters plasma, not involved in reabsorption.",
            "e": "Arterioles regulate blood flow, not tubular reabsorption."
        },
        "relatedQuestions": ["82 (ADH and aldosterone)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 55,
        "question": "Which factors of the following increases glomerular filtration rate?",
        "options": [
            "Afferent arteriole constriction",
            "Efferent arteriole vasodilation",
            "Decrease in filtration pressure",
            "Congestive heart failure",
            "Increase in the renal blood flow"
        ],
        "answer": 4,
        "correctAnswer": "Increase in the renal blood flow",
        "explanation": "An increase in renal blood flow increases glomerular capillary pressure, which directly increases GFR. Afferent arteriolar constriction (A) and efferent arteriolar dilation (B) both decrease glomerular pressure and GFR. Congestive heart failure (D) reduces overall renal perfusion.",
        "whyNotOtherOptions": {
            "a": "Afferent constriction reduces blood flow, decreasing GFR.",
            "b": "Efferent vasodilation lowers glomerular pressure, reducing GFR.",
            "c": "Decreased filtration pressure directly lowers GFR.",
            "d": "Congestive heart failure reduces renal perfusion, lowering GFR."
        },
        "relatedQuestions": ["50 (GFR)", "51 (filtration pressure)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 56,
        "question": "Which of the following is true regarding control of the GFR and RBF?",
        "options": [
            "Strong activation of sympathetic NS causes marked vasoconstriction of efferent arterioles",
            "Angiotensin II causes efferent arteriolar vasoconstriction",
            "Angiotensin II increases flow through peritubular capillaries",
            "ANP (released by atria when stretched) decreases GFR",
            "Endothelin increases GFR"
        ],
        "answer": 1,
        "correctAnswer": "Angiotensin II causes efferent arteriolar vasoconstriction",
        "explanation": "A is wrong: Strong sympathetic activation causes afferent arteriolar constriction. B is correct: Angiotensin II preferentially constricts the efferent arteriole, which helps maintain GFR during low blood pressure. C is wrong: Efferent constriction decreases flow through peritubular capillaries. D is wrong: ANP increases GFR. E is wrong: Endothelin is a potent vasoconstrictor that decreases GFR.",
        "whyNotOtherOptions": {
            "a": "Sympathetic activation constricts afferent arterioles, not efferent.",
            "c": "Efferent constriction reduces peritubular capillary flow.",
            "d": "ANP promotes vasodilation, increasing GFR.",
            "e": "Endothelin constricts vessels, decreasing GFR."
        },
        "relatedQuestions": ["55 (GFR factors)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 57,
        "question": "Which of the following factors is not in favor of GFR?",
        "options": [
            "Increased capillary hydrostatic pressure of the glomerulus",
            "Decreased capsular hydrostatic pressure",
            "Decreased glomerular oncotic pressure",
            "Efferent arteriolar vasoconstriction",
            "Afferent arteriolar vasoconstriction"
        ],
        "answer": 4,
        "correctAnswer": "Afferent arteriolar vasoconstriction",
        "explanation": "Factors favoring filtration are those that increase the outward pressure or decrease the inward pressure. Afferent arteriolar constriction reduces blood flow into the glomerulus, decreasing the glomerular hydrostatic pressure, which is the main driving force for filtration. Therefore, it is not in favor of GFR.",
        "whyNotOtherOptions": {
            "a": "Increased hydrostatic pressure drives filtration, increasing GFR.",
            "b": "Decreased capsular pressure reduces opposition, increasing GFR.",
            "c": "Decreased oncotic pressure reduces inward force, increasing GFR.",
            "d": "Efferent vasoconstriction increases glomerular pressure, raising GFR."
        },
        "relatedQuestions": ["51 (filtration pressure)", "55 (GFR factors)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 58,
        "question": "Bowman’s capsular hydrostatic pressure is because of:",
        "options": [
            "Renal blood flow",
            "Glomerular oncotic pressure",
            "Glomerular hydrostatic pressure",
            "Glomerular filtrate",
            "Sympathetic stimulation"
        ],
        "answer": 3,
        "correctAnswer": "Glomerular filtrate",
        "explanation": "Bowman's capsular hydrostatic pressure is the pressure exerted by the fluid (filtrate) already present in Bowman's capsule and the tubules. It opposes filtration. An obstruction in the tubules would increase this pressure and decrease GFR.",
        "whyNotOtherOptions": {
            "a": "Renal blood flow affects glomerular pressure, not capsular pressure.",
            "b": "Oncotic pressure is due to plasma proteins, not filtrate.",
            "c": "Glomerular hydrostatic pressure drives filtration, not capsular pressure.",
            "e": "Sympathetic stimulation affects arterioles, not capsular pressure directly."
        },
        "relatedQuestions": ["51 (filtration pressure)", "57 (GFR factors)"],
        "category": "Renal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 59,
        "question": "Which factor of the following inhibits motility of the GIT?",
        "options": [
            "Sympathetic stimulation",
            "Parasympathetic stimulation",
            "Myenteric nerve plexus",
            "A hormone gastrin",
            "Motilin"
        ],
        "answer": 0,
        "correctAnswer": "Sympathetic stimulation",
        "explanation": "The sympathetic nervous system has an overall inhibitory effect on GI motility and secretion ('fight or flight' diverts energy away from digestion). The parasympathetic system, myenteric plexus, gastrin, and motilin are all stimulatory.",
        "whyNotOtherOptions": {
            "b": "Parasympathetic stimulation enhances GI motility via the vagus nerve.",
            "c": "Myenteric plexus coordinates peristalsis, promoting motility.",
            "d": "Gastrin stimulates gastric motility and acid secretion.",
            "e": "Motilin promotes intestinal motility, especially during fasting."
        },
        "relatedQuestions": ["66 (GIT regulation)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 60,
        "question": "Ptyalin (amylase) is produced by:",
        "options": [
            "The parotid gland",
            "Parietal cells",
            "Chief cells",
            "Enteroendocrine cells"
        ],
        "answer": 0,
        "correctAnswer": "The parotid gland",
        "explanation": "Ptyalin is another name for salivary amylase, which is secreted primarily by the parotid glands. Chief cells in the stomach secrete pepsinogen.",
        "whyNotOtherOptions": {
            "b": "Parietal cells secrete HCl and intrinsic factor, not amylase.",
            "c": "Chief cells secrete pepsinogen, not amylase.",
            "d": "Enteroendocrine cells secrete hormones like gastrin, not enzymes."
        },
        "relatedQuestions": ["30 (salivary glands)", "65 (digestion in mouth)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
        {
        "id": 61,
        "question": "Secretion of HCl by parietal cells in the stomach is increased by",
        "options": [
            "Parasympathetic stimulation",
            "Drinking coffee and alcohol",
            "Release of histamine by mast cells",
            "Infection with helicobacter pylori",
            "All are correct"
        ],
        "answer": 4,
        "correctAnswer": "All are correct",
        "explanation": "All listed options can stimulate HCl secretion. Parasympathetic (vagal) stimulation releases ACh. Coffee and alcohol can stimulate gastrin release. Histamine is a potent direct stimulant. H. pylori infection can disrupt the normal inhibitory mechanisms, leading to increased acid secretion.",
        "whyNotOtherOptions": {
            "a": "Parasympathetic stimulation via vagus nerve increases HCl via ACh.",
            "b": "Coffee and alcohol stimulate gastrin, which increases HCl.",
            "c": "Histamine directly stimulates parietal cells via H2 receptors.",
            "d": "H. pylori disrupts acid regulation, often increasing HCl."
        },
        "relatedQuestions": ["59 (GIT motility)", "68 (gastrin)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 62,
        "question": "The major stimulus for the release of secretin hormone is",
        "options": [
            "Protein digestion products",
            "Histamine",
            "Somatostatin",
            "Acidic chyme in the duodenum",
            "Fat digestion products"
        ],
        "answer": 3,
        "correctAnswer": "Acidic chyme in the duodenum",
        "explanation": "Secretin is released by S-cells in the duodenum in response to low pH (acidic chyme). Its main action is to stimulate the pancreas to secrete bicarbonate-rich fluid to neutralize the acid.",
        "whyNotOtherOptions": {
            "a": "Protein digestion products primarily stimulate CCK, not secretin.",
            "b": "Histamine affects gastric acid, not secretin release.",
            "c": "Somatostatin inhibits GI hormones, not a stimulus for secretin.",
            "e": "Fat digestion products primarily stimulate CCK, not secretin."
        },
        "relatedQuestions": ["70 (CCK)", "71 (CCK stimulus)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 63,
        "question": "GIT layers that contains much of glands is",
        "options": [
            "Serosa",
            "Muscularis",
            "Submucosa",
            "Mucosa",
            "All"
        ],
        "answer": 3,
        "correctAnswer": "Mucosa",
        "explanation": "The mucosa is the innermost layer and contains the epithelial lining and the glands responsible for secretion (e.g., gastric glands, intestinal crypts). The submucosa may contain some larger glands (like Brunner's glands in the duodenum), but the majority are in the mucosa.",
        "whyNotOtherOptions": {
            "a": "Serosa is the outermost layer, not involved in gland secretion.",
            "b": "Muscularis is responsible for motility, not gland function.",
            "c": "Submucosa contains some glands but fewer than the mucosa.",
            "e": "Only mucosa primarily contains glands, not all layers."
        },
        "relatedQuestions": ["61 (HCl secretion)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 64,
        "question": "Center for chewing is located in the",
        "options": [
            "Medulla",
            "Pons",
            "Midbrain",
            "Spinal cord",
            "Cerebrum"
        ],
        "answer": 1,
        "correctAnswer": "Pons",
        "explanation": "The central pattern generator for the rhythmic activity of chewing (mastication) is located in the brainstem, specifically in the midbrain and pons.",
        "whyNotOtherOptions": {
            "a": "Medulla controls swallowing, not chewing.",
            "c": "Midbrain contributes but is not the primary chewing center.",
            "d": "Spinal cord is not involved in chewing coordination.",
            "e": "Cerebrum initiates voluntary chewing but not the rhythmic pattern."
        },
        "relatedQuestions": ["75 (swallowing center)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 65,
        "question": "Which of the following food item is chemically digested in the mouth?",
        "options": [
            "Protein",
            "Fat",
            "CHO (Carbohydrates)",
            "Vitamin",
            "Mineral"
        ],
        "answer": 2,
        "correctAnswer": "CHO (Carbohydrates)",
        "explanation": "Chemical digestion of carbohydrates begins in the mouth with the action of salivary amylase (ptyalin) on starch. Digestion of proteins and fats begins in the stomach and small intestine, respectively.",
        "whyNotOtherOptions": {
            "a": "Protein digestion begins in the stomach with pepsin.",
            "b": "Fat digestion primarily occurs in the small intestine with lipase.",
            "d": "Vitamins are absorbed, not digested, in the GI tract.",
            "e": "Minerals are absorbed, not chemically digested."
        },
        "relatedQuestions": ["60 (ptyalin)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 66,
        "question": "Which of the following is correct regarding GIT regulation?",
        "options": [
            "Parasympathetic nervous system has excitatory effect on GI function.",
            "Salivary secretion is mainly regulated by gastric hormone.",
            "Sympathetic nerves have excitatory effect on the GI functions.",
            "Secretin hormone inhibits pancreatic secretions.",
            "None of the above."
        ],
        "answer": 0,
        "correctAnswer": "Parasympathetic nervous system has excitatory effect on GI function.",
        "explanation": "A is correct: The parasympathetic nervous system is generally excitatory to the GI tract. B is wrong: Salivary secretion is primarily regulated by neural reflexes, not gastric hormones. C is wrong: Sympathetic nerves are inhibitory. D is wrong: Secretin stimulates pancreatic bicarbonate secretion.",
        "whyNotOtherOptions": {
            "b": "Salivary secretion is controlled by autonomic nerves, not gastric hormones.",
            "c": "Sympathetic nerves inhibit GI motility and secretion.",
            "d": "Secretin stimulates, not inhibits, pancreatic bicarbonate secretion.",
            "e": "Option A is correct, so 'none' is invalid."
        },
        "relatedQuestions": ["59 (GIT motility)", "62 (secretin)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 67,
        "question": "Identify an enzyme secreted by the chief cells of the stomach:",
        "options": [
            "HCl",
            "Pepsin",
            "Mucus",
            "Intrinsic factor",
            "None of the above"
        ],
        "answer": 1,
        "correctAnswer": "Pepsin",
        "explanation": "Chief cells secrete pepsinogen, the inactive precursor of the enzyme pepsin. Parietal cells secrete HCl and intrinsic factor.",
        "whyNotOtherOptions": {
            "a": "HCl is a secretion, not an enzyme, produced by parietal cells.",
            "c": "Mucus is secreted by mucus cells, not an enzyme.",
            "d": "Intrinsic factor is secreted by parietal cells, not an enzyme.",
            "e": "Option B is correct, so 'none' is invalid."
        },
        "relatedQuestions": ["61 (HCl secretion)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 68,
        "question": "An endocrine function of the stomach is the fact that it secretes:",
        "options": [
            "HCl",
            "Pepsin",
            "Intrinsic factor",
            "Mucus",
            "Gastrin"
        ],
        "answer": 4,
        "correctAnswer": "Gastrin",
        "explanation": "Endocrine means a hormone is secreted into the bloodstream. Gastrin is a hormone secreted by G-cells in the stomach antrum and duodenum. The other substances are exocrine secretions (released into the stomach lumen).",
        "whyNotOtherOptions": {
            "a": "HCl is an exocrine secretion into the stomach lumen.",
            "b": "Pepsin is an exocrine enzyme, not a hormone.",
            "c": "Intrinsic factor is exocrine, aiding B12 absorption in the gut.",
            "d": "Mucus is an exocrine secretion for protection."
        },
        "relatedQuestions": ["61 (HCl secretion)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 69,
        "question": "The hardest part of the teeth is",
        "options": [
            "Crown",
            "Dentin",
            "Enamel",
            "Root",
            "None"
        ],
        "answer": 2,
        "correctAnswer": "Enamel",
        "explanation": "Enamel, which covers the crown of the tooth, is the hardest substance in the human body. It is heavily mineralized.",
        "whyNotOtherOptions": {
            "a": "Crown is the visible tooth part, covered by enamel.",
            "b": "Dentin is hard but less so than enamel.",
            "d": "Root is anchored in bone, covered by cementum, not as hard.",
            "e": "Option C is correct, so 'none' is invalid."
        },
        "relatedQuestions": ["60 (salivary glands)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 70,
        "question": "A hormone that causes release of bile from the gall bladder is:",
        "options": [
            "Secretin",
            "Cholecystokinin (CCK)",
            "Gastric inhibitory peptide",
            "Gastrin",
            "Sympathetic nervous system"
        ],
        "answer": 1,
        "correctAnswer": "Cholecystokinin (CCK)",
        "explanation": "Cholecystokinin (CCK), released in response to fats in the duodenum, is the primary hormone that stimulates contraction of the gallbladder and relaxation of the Sphincter of Oddi, thereby ejecting bile. Secretin primarily stimulates bile secretion from the liver (water and bicarbonate).",
        "whyNotOtherOptions": {
            "a": "Secretin stimulates liver bile secretion, not gallbladder contraction.",
            "c": "Gastric inhibitory peptide regulates insulin, not bile release.",
            "d": "Gastrin stimulates gastric acid, not bile release.",
            "e": "Sympathetic system inhibits gallbladder contraction."
        },
        "relatedQuestions": ["62 (secretin)", "71 (CCK stimulus)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 71,
        "question": "Stimulus for the secretion of cholecystokinin is",
        "options": [
            "Protein digestion products (amino acids)",
            "Histamine",
            "Somatostatin",
            "Acidic chyme in the duodenum",
            "Fat digestion products (fatty acids)"
        ],
        "answer": 0,
        "correctAnswer": "Protein digestion products (amino acids)",
        "explanation": "While fatty acids are a very strong stimulus, CCK is also significantly stimulated by amino acids and peptides from partially digested proteins. Both A and E are correct, but if only one answer is allowed, A (Protein digestion products) is a primary stimulus alongside fats.",
        "whyNotOtherOptions": {
            "b": "Histamine stimulates gastric acid, not CCK.",
            "c": "Somatostatin inhibits GI hormones, not a stimulus for CCK.",
            "d": "Acidic chyme stimulates secretin, not CCK.",
            "e": "Fat digestion products are also correct, but A is chosen per question intent."
        },
        "relatedQuestions": ["62 (secretin)", "70 (CCK)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 72,
        "question": "The total number of premolar teeth in adults is",
        "options": [
            "8",
            "4",
            "12",
            "16",
            "20"
        ],
        "answer": 0,
        "correctAnswer": "8",
        "explanation": "Adults have 8 premolars: 2 in each quadrant (first and second premolar).",
        "whyNotOtherOptions": {
            "b": "4 premolars would be one per quadrant, which is incorrect.",
            "c": "12 includes other teeth types, like molars.",
            "d": "16 is too high, possibly confusing with total teeth count.",
            "e": "20 is far too high for premolars alone."
        },
        "relatedQuestions": ["69 (enamel)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 73,
        "question": "Which one of the following is secreted into the colon?",
        "options": [
            "Glucose",
            "Glycine",
            "Bile Salts",
            "Calcium",
            "Bicarbonate"
        ],
        "answer": 4,
        "correctAnswer": "Bicarbonate",
        "explanation": "The colon secretes bicarbonate (HCO3-) ions in exchange for chloride ions, which helps to neutralize acids produced by colonic bacteria. The other substances are absorbed or are not primarily secreted there.",
        "whyNotOtherOptions": {
            "a": "Glucose is absorbed, not secreted, in the colon.",
            "b": "Glycine is absorbed as an amino acid, not secreted.",
            "c": "Bile salts are reabsorbed in the ileum, not secreted in the colon.",
            "d": "Calcium is absorbed, not secreted, in the colon."
        },
        "relatedQuestions": ["70 (bile release)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 74,
        "question": "Bile salts are secreted into what region of the small intestine?",
        "options": [
            "Jejunum",
            "Duodenum",
            "Ileum",
            "Splanchnic Circulation",
            "Enterohepatic Circulation"
        ],
        "answer": 1,
        "correctAnswer": "Duodenum",
        "explanation": "Bile is ejected from the gallbladder and enters the duodenum via the common bile duct.",
        "whyNotOtherOptions": {
            "a": "Jejunum receives bile indirectly, but secretion occurs in the duodenum.",
            "c": "Ileum is primarily for bile salt reabsorption, not secretion.",
            "d": "Splanchnic circulation refers to blood flow, not bile secretion.",
            "e": "Enterohepatic circulation is the bile recycling process, not a region."
        },
        "relatedQuestions": ["70 (CCK)", "73 (colon secretion)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 75,
        "question": "Center for swallowing is located in the",
        "options": [
            "Hypothalamus",
            "Medulla oblongata",
            "Pons",
            "Mid-brain",
            "Cortex"
        ],
        "answer": 1,
        "correctAnswer": "Medulla oblongata",
        "explanation": "The swallowing center, a central pattern generator that coordinates the complex reflex, is located in the medulla oblongata.",
        "whyNotOtherOptions": {
            "a": "Hypothalamus regulates autonomic functions, not swallowing.",
            "c": "Pons is involved in chewing, not swallowing.",
            "d": "Midbrain is not the primary swallowing center.",
            "e": "Cortex initiates voluntary swallowing but not the reflex."
        },
        "relatedQuestions": ["64 (chewing center)"],
        "category": "Gastrointestinal Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 76,
        "question": "Identify a hormone whose action is exhibited via gene expression:",
        "options": [
            "Insulin",
            "Aldosterone",
            "Catecholamine",
            "Calcitonin",
            "Oxytocin"
        ],
        "answer": 1,
        "correctAnswer": "Aldosterone",
        "explanation": "Hormones that act via gene expression are typically lipid-soluble (steroids, thyroid hormones). They bind to intracellular receptors, and the hormone-receptor complex acts as a transcription factor. Aldosterone is a steroid hormone. Insulin, catecholamines, calcitonin, and oxytocin act through cell surface receptors and second messengers.",
        "whyNotOtherOptions": {
            "a": "Insulin acts via surface receptors and second messengers.",
            "c": "Catecholamines (e.g., epinephrine) use cAMP signaling, not gene expression.",
            "d": "Calcitonin acts via surface receptors, not nuclear.",
            "e": "Oxytocin uses second messengers, not gene expression."
        },
        "relatedQuestions": ["79 (intracellular receptors)", "81 (thyroid hormone)"],
        "category": "Endocrinology",
        "difficulty": "Hard"
    },
    {
        "id": 77,
        "question": "The hormone that is stored in the form of preprohormone is:",
        "options": [
            "Insulin",
            "Aldosterone",
            "Thyroxine",
            "Testosterone",
            "Cortisol"
        ],
        "answer": 0,
        "correctAnswer": "Insulin",
        "explanation": "Peptide/protein hormones like insulin are synthesized as larger inactive precursors. Insulin is synthesized as preproinsulin, which is cleaved to proinsulin and then to active insulin. Steroid hormones (B, D, E) are synthesized on demand and not stored in vesicles.",
        "whyNotOtherOptions": {
            "b": "Aldosterone, a steroid hormone, is not stored as a preprohormone.",
            "c": "Thyroxine is an amine hormone, not stored as a preprohormone.",
            "d": "Testosterone, a steroid, is synthesized on demand.",
            "e": "Cortisol, a steroid, is not stored as a precursor."
        },
        "relatedQuestions": ["76 (aldosterone)"],
        "category": "Endocrinology",
        "difficulty": "Hard"
    },
    {
        "id": 78,
        "question": "From the given options below, which one is an amine hormone?",
        "options": [
            "Growth hormone",
            "T3 (Triiodothyronine)",
            "ADH",
            "Cortisol"
        ],
        "answer": 1,
        "correctAnswer": "T3 (Triiodothyronine)",
        "explanation": "Amine hormones are derived from the amino acids tyrosine or tryptophan. T3 and T4 (thyroid hormones) are derived from tyrosine. Growth hormone and ADH are peptide hormones. Cortisol is a steroid hormone.",
        "whyNotOtherOptions": {
            "a": "Growth hormone is a peptide hormone, not amine-derived.",
            "c": "ADH is a peptide hormone, not amine-based.",
            "d": "Cortisol is a steroid hormone derived from cholesterol."
        },
        "relatedQuestions": ["81 (thyroid hormone)"],
        "category": "Endocrinology",
        "difficulty": "Hard"
    },
    {
        "id": 79,
        "question": "Which hormone of the following has receptors inside the cell?",
        "options": [
            "ADH",
            "Insulin",
            "Growth hormone",
            "Glucagon",
            "Aldosterone"
        ],
        "answer": 4,
        "correctAnswer": "Aldosterone",
        "explanation": "As a steroid hormone, aldosterone is lipid-soluble and crosses the cell membrane to bind to receptors in the cytoplasm or nucleus. ADH, insulin, GH, and glucagon are water-soluble and bind to receptors on the cell surface.",
        "whyNotOtherOptions": {
            "a": "ADH binds to surface G-protein-coupled receptors.",
            "b": "Insulin uses tyrosine kinase receptors on the cell surface.",
            "c": "Growth hormone binds to surface cytokine receptors.",
            "d": "Glucagon uses G-protein-coupled receptors on the surface."
        },
        "relatedQuestions": ["76 (aldosterone)", "82 (fluid balance)"],
        "category": "Endocrinology",
        "difficulty": "Hard"
    },
    {
        "id": 80,
        "question": "A phenomenon regulated by a positive feedback mechanism is:",
        "options": [
            "Secretion of insulin",
            "Milk ejection reflex",
            "Gonadal function",
            "Growth",
            "Secretion of T3 and T4"
        ],
        "answer": 1,
        "correctAnswer": "Milk ejection reflex",
        "explanation": "Positive feedback amplifies a change. The milk ejection reflex is a classic example: suckling stimulates oxytocin release, which causes milk ejection, which encourages more suckling. Another major example is the LH surge during ovulation. Most body systems are regulated by negative feedback.",
        "whyNotOtherOptions": {
            "a": "Insulin secretion is regulated by negative feedback to glucose levels.",
            "c": "Gonadal function is mostly under negative feedback, except ovulation.",
            "d": "Growth is regulated by negative feedback via growth hormone.",
            "e": "T3/T4 secretion is controlled by negative feedback via TSH."
        },
        "relatedQuestions": ["1 (negative feedback)"],
        "category": "Endocrinology",
        "difficulty": "Hard"
    },
    {
        "id": 81,
        "question": "Being non-steroidal but having an intracellular receptor is:",
        "options": [
            "Epinephrine",
            "Dopamine",
            "T3 (Thyroid Hormone)",
            "Somatostatin",
            "Serotonin"
        ],
        "answer": 2,
        "correctAnswer": "T3 (Thyroid Hormone)",
        "explanation": "Thyroid hormones (T3/T4) are amine hormones (derived from tyrosine), not steroids. However, like steroids, they are lipid-soluble and have intracellular receptors in the nucleus that regulate gene transcription.",
        "whyNotOtherOptions": {
            "a": "Epinephrine acts via surface G-protein-coupled receptors.",
            "b": "Dopamine uses surface receptors, not intracellular.",
            "d": "Somatostatin is a peptide hormone with surface receptors.",
            "e": "Serotonin acts via surface receptors, not intracellular."
        },
        "relatedQuestions": ["78 (amine hormone)", "79 (intracellular receptors)"],
        "category": "Endocrinology",
        "difficulty": "Hard"
    },
    {
        "id": 82,
        "question": "Hormones designed for the regulation of fluid and electrolyte balance are:",
        "options": [
            "Growth hormone and insulin",
            "Aldosterone and insulin",
            "Aldosterone and ADH",
            "Oxytocin and ADH",
            "T3 and T4"
        ],
        "answer": 2,
        "correctAnswer": "Aldosterone and ADH",
        "explanation": "Aldosterone regulates sodium (and thus water) reabsorption and potassium secretion in the kidneys. Antidiuretic Hormone (ADH) regulates water reabsorption by increasing the permeability of the collecting ducts. Together, they are the primary hormones for fluid and electrolyte balance.",
        "whyNotOtherOptions": {
            "a": "Growth hormone and insulin regulate metabolism, not fluid balance.",
            "b": "Insulin regulates glucose, not electrolytes directly.",
            "d": "Oxytocin is involved in labor and lactation, not fluid balance.",
            "e": "T3 and T4 regulate metabolism, not fluid or electrolytes."
        },
        "relatedQuestions": ["54 (ADH and aldosterone)", "79 (aldosterone)"],
        "category": "Endocrinology",
        "difficulty": "Hard"
    },
    {
        "id": 83,
        "question": "A hormone whose secretion is in excess during the time of deep sleep is:",
        "options": [
            "Growth hormone",
            "Insulin",
            "Cortisol",
            "Adrenalin",
            "ADH"
        ],
        "answer": 0,
        "correctAnswer": "Growth hormone",
        "explanation": "The highest pulses of Growth Hormone (GH) secretion occur during slow-wave (deep) sleep. Cortisol levels are highest in the early morning just before waking.",
        "whyNotOtherOptions": {
            "b": "Insulin secretion is tied to meals, not sleep.",
            "c": "Cortisol peaks in the morning, not during deep sleep.",
            "d": "Adrenalin (epinephrine) is stress-related, not sleep-related.",
            "e": "ADH secretion is regulated by plasma osmolality, not sleep."
        },
        "relatedQuestions": ["76 (aldosterone)"],
        "category": "Endocrinology",
        "difficulty": "Hard"
    },
    {
        "id": 84,
        "question": "Mullerian duct develops into the:",
        "options": [
            "Ovaries",
            "Female genital tract",
            "Male accessory glands",
            "Female external genitalia",
            "Ovaries"
        ],
        "answer": 1,
        "correctAnswer": "Female genital tract",
        "explanation": "In the absence of anti-Müllerian hormone (AMH) from the fetal testes, the Müllerian ducts develop into the female internal genitalia: the fallopian tubes, uterus, and upper part of the vagina. The ovaries develop from the genital ridge.",
        "whyNotOtherOptions": {
            "a": "Ovaries develop from the genital ridge, not Müllerian ducts.",
            "c": "Male accessory glands arise from Wolffian ducts.",
            "d": "Female external genitalia develop from the genital tubercle.",
            "e": "Ovaries are repeated and incorrect as per A."
        },
        "relatedQuestions": ["89 (fertilization site)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 85,
        "question": "Which one of the following is known to be the hormone of ovulation?",
        "options": [
            "FSH",
            "Estradiol",
            "Progesterone",
            "hCG",
            "LH"
        ],
        "answer": 4,
        "correctAnswer": "LH",
        "explanation": "The Luteinizing Hormone (LH) surge from the anterior pituitary is the direct trigger for ovulation—the release of the oocyte from the mature ovarian follicle.",
        "whyNotOtherOptions": {
            "a": "FSH promotes follicle growth, not ovulation directly.",
            "b": "Estradiol triggers the LH surge but is not the ovulatory hormone.",
            "c": "Progesterone maintains pregnancy post-ovulation.",
            "d": "hCG supports pregnancy, not ovulation."
        },
        "relatedQuestions": ["80 (positive feedback)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 86,
        "question": "Which of the following is not a haploid cell?",
        "options": [
            "Spermatogonium",
            "Secondary oocytes",
            "Spermatids",
            "Oocyte",
            "Ovum"
        ],
        "answer": 0,
        "correctAnswer": "Spermatogonium",
        "explanation": "Spermatogonia (and oogonia) are the stem cells in the testes and ovaries. They are diploid (2n). They undergo mitosis and then meiosis to produce haploid (1n) gametes (spermatids, secondary oocytes, ovum).",
        "whyNotOtherOptions": {
            "b": "Secondary oocytes are haploid, post-meiosis I.",
            "c": "Spermatids are haploid, post-meiosis.",
            "d": "Oocytes, particularly secondary, are haploid.",
            "e": "Ovum is the mature haploid female gamete."
        },
        "relatedQuestions": ["85 (ovulation)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 87,
        "question": "In the male sexual act, the erection phase is under the regulation of the",
        "options": [
            "Parasympathetic nervous system",
            "Sympathetic nervous system",
            "Somatic pudendal nerve",
            "The vagus nerve from medulla",
            "Phrenic nerve of the cervical segment"
        ],
        "answer": 0,
        "correctAnswer": "Parasympathetic nervous system",
        "explanation": "Erection is primarily a parasympathetic process mediated by the pelvic splanchnic nerves. This leads to vasodilation of penile arteries and increased blood flow. Sympathetic stimulation is involved in ejaculation.",
        "whyNotOtherOptions": {
            "b": "Sympathetic system mediates ejaculation, not erection.",
            "c": "Pudendal nerve controls somatic muscles, not vascular erection.",
            "d": "Vagus nerve is not involved in penile innervation.",
            "e": "Phrenic nerve innervates the diaphragm, not genitalia."
        },
        "relatedQuestions": ["33 (ANS innervation)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 88,
        "question": "The function of the uterus is:",
        "options": [
            "Hormone secretion",
            "Essential reproductive organ",
            "Site for normal pregnancy",
            "Gametogenesis",
            "None of the above"
        ],
        "answer": 2,
        "correctAnswer": "Site for normal pregnancy",
        "explanation": "The primary function of the uterus is to provide the site for implantation, gestation, and development of the fetus. The ovaries are the essential reproductive organs responsible for gametogenesis and hormone secretion.",
        "whyNotOtherOptions": {
            "a": "Hormone secretion is primarily an ovarian function.",
            "b": "Ovaries, not uterus, are the essential reproductive organs.",
            "d": "Gametogenesis occurs in the ovaries, not uterus.",
            "e": "Option C is correct, so 'none' is invalid."
        },
        "relatedQuestions": ["84 (Müllerian duct)", "89 (fertilization)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 89,
        "question": "Usual site of fertilization in the female reproductive system is:",
        "options": [
            "Ovary",
            "Fallopian tubes",
            "Uterus",
            "Vagina",
            "Cervix"
        ],
        "answer": 1,
        "correctAnswer": "Fallopian tubes",
        "explanation": "Fertilization, the union of sperm and egg, typically occurs in the ampulla of the fallopian tube.",
        "whyNotOtherOptions": {
            "a": "Ovary releases the egg but is not the fertilization site.",
            "c": "Uterus is the site of implantation, not fertilization.",
            "d": "Vagina is a passage for sperm, not fertilization.",
            "e": "Cervix allows sperm passage but is not the fertilization site."
        },
        "relatedQuestions": ["84 (Müllerian duct)", "88 (uterus)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    },
    {
        "id": 90,
        "question": "Proliferative phase of the endometrial cycle is controlled by which hormone?",
        "options": [
            "Progesterone",
            "FSH",
            "LH",
            "Estrogen",
            "Oxytocin"
        ],
        "answer": 3,
        "correctAnswer": "Estrogen",
        "explanation": "The menstrual cycle has two main phases in the endometrium. The proliferative phase (rebuilding the lining after menstruation) is driven by estrogen from the developing ovarian follicles. The secretory phase is driven by progesterone from the corpus luteum.",
        "whyNotOtherOptions": {
            "a": "Progesterone drives the secretory phase, not proliferative.",
            "b": "FSH stimulates follicle growth, indirectly affecting estrogen.",
            "c": "LH triggers ovulation, not proliferative phase.",
            "e": "Oxytocin is involved in labor, not endometrial cycle."
        },
        "relatedQuestions": ["85 (LH)", "88 (uterus)"],
        "category": "Reproductive Physiology",
        "difficulty": "Hard"
    }
]
    

;
// Store original questions for restart functionality (moved to global scope for cross-browser compatibility)
const originalQuestions = [...questions];
// DOM Elements (global for cross-browser)
let body = document.body;
let questionElement, optionsContainer, currentQuestionElement, totalQuestionsElement, progressBar, prevButton, nextButton, skipButton, feedbackElement, timerElement, scoreElement, streakElement, categoryElement, explanationContainer, explanationTextElement, themeToggle, soundToggle, bookmarkBtn, bookmarksCount, categoryTag, difficultyTag, showExplanationBtn, statsBtn, statsModal, closeStatsModal, closeStatsBtn, quickActionsBtn, quickActionsModal, closeActionsModal, closeActionsBtn, studyModeToggle, confettiContainer;
// Quiz state
let currentQuestionIndex = 0;
let score = 0;
let streak = 0;
let selectedOption = null;
let timeStarted = null;
let timerInterval = null;
let timeElapsed = 0;
let answers = [];
let soundsEnabled = true;
let bookmarkedQuestions = [];
let quizHistory = [];
let studyMode = false;
let performanceMetrics = {
    categories: {},
    difficulties: { Easy: 0, Medium: 0, Hard: 0, "Very Hard": 0 },
    totalCorrect: 0,
    totalQuestions: 0,
    totalTime: 0
};
function initQuiz() {
    try {
        // Assign DOM elements safely
        questionElement = document.getElementById('question') || questionElement;
        optionsContainer = document.getElementById('options-container') || optionsContainer;
        currentQuestionElement = document.getElementById('current-question') || currentQuestionElement;
        totalQuestionsElement = document.getElementById('total-questions') || totalQuestionsElement;
        progressBar = document.getElementById('progress-bar') || progressBar;
        prevButton = document.getElementById('prev-btn') || prevButton;
        nextButton = document.getElementById('next-btn') || nextButton;
        skipButton = document.getElementById('skip-btn') || skipButton;
        feedbackElement = document.getElementById('feedback') || feedbackElement;
        timerElement = document.getElementById('timer') || timerElement;
        scoreElement = document.getElementById('score') || scoreElement;
        streakElement = document.getElementById('streak') || streakElement;
        categoryElement = document.getElementById('category') || categoryElement;
        explanationContainer = document.getElementById('explanation-container') || explanationContainer;
        explanationTextElement = document.getElementById('explanation-text') || explanationTextElement;
        themeToggle = document.getElementById('theme-toggle') || themeToggle;
        soundToggle = document.getElementById('sound-toggle') || soundToggle;
        bookmarkBtn = document.getElementById('bookmark-btn') || bookmarkBtn;
        bookmarksCount = document.getElementById('bookmarks-count') || bookmarksCount;
        categoryTag = document.getElementById('category-tag') || categoryTag;
        difficultyTag = document.getElementById('difficulty-tag') || difficultyTag;
        showExplanationBtn = document.getElementById('show-explanation-btn') || showExplanationBtn;
        statsBtn = document.getElementById('stats-btn') || statsBtn;
        statsModal = document.getElementById('stats-modal') || statsModal;
        closeStatsModal = document.getElementById('close-stats-modal') || closeStatsModal;
        closeStatsBtn = document.getElementById('close-stats-btn') || closeStatsBtn;
        quickActionsBtn = document.getElementById('quick-actions-btn') || quickActionsBtn;
        quickActionsModal = document.getElementById('quick-actions-modal') || quickActionsModal;
        closeActionsModal = document.getElementById('close-actions-modal') || closeActionsModal;
        closeActionsBtn = document.getElementById('close-actions-btn') || closeActionsBtn;
        studyModeToggle = document.getElementById('study-mode-toggle') || studyModeToggle;
        confettiContainer = document.getElementById('confetti-container') || confettiContainer;
        // Reset DOM elements
        if (scoreElement) scoreElement.textContent = score;
        if (streakElement) streakElement.textContent = streak;
        if (timerElement) timerElement.textContent = '00:00';
        if (totalQuestionsElement) totalQuestionsElement.textContent = questions.length;
        
        loadQuestion();
        startTimer();
        
        // Clone elements to remove old listeners (cross-browser safe)
        if (prevButton) {
            const prevBtnClone = prevButton.cloneNode(true);
            prevButton.parentNode.replaceChild(prevBtnClone, prevButton);
            prevButton = prevBtnClone;
        }
        if (nextButton) {
            const nextBtnClone = nextButton.cloneNode(true);
            nextButton.parentNode.replaceChild(nextBtnClone, nextButton);
            nextButton = nextBtnClone;
        }
        if (skipButton) {
            const skipBtnClone = skipButton.cloneNode(true);
            skipButton.parentNode.replaceChild(skipBtnClone, skipButton);
            skipButton = skipBtnClone;
        }
        if (themeToggle) {
            const themeToggleClone = themeToggle.cloneNode(true);
            themeToggle.parentNode.replaceChild(themeToggleClone, themeToggle);
            themeToggle = themeToggleClone;
        }
        if (soundToggle) {
            const soundToggleClone = soundToggle.cloneNode(true);
            soundToggle.parentNode.replaceChild(soundToggleClone, soundToggle);
            soundToggle = soundToggleClone;
        }
        if (bookmarkBtn) {
            const bookmarkBtnClone = bookmarkBtn.cloneNode(true);
            bookmarkBtn.parentNode.replaceChild(bookmarkBtnClone, bookmarkBtn);
            bookmarkBtn = bookmarkBtnClone;
        }
        if (showExplanationBtn) {
            const showExplanationBtnClone = showExplanationBtn.cloneNode(true);
            showExplanationBtn.parentNode.replaceChild(showExplanationBtnClone, showExplanationBtn);
            showExplanationBtn = showExplanationBtnClone;
        }
        if (statsBtn) {
            const statsBtnClone = statsBtn.cloneNode(true);
            statsBtn.parentNode.replaceChild(statsBtnClone, statsBtn);
            statsBtn = statsBtnClone;
        }
        // Add event listeners safely
        if (prevButton) prevButton.addEventListener('click', goToPreviousQuestion);
        if (nextButton) nextButton.addEventListener('click', goToNextQuestion);
        if (skipButton) skipButton.addEventListener('click', skipQuestion);
        if (themeToggle) themeToggle.addEventListener('click', toggleTheme);
        if (soundToggle) soundToggle.addEventListener('click', toggleSound);
        if (bookmarkBtn) bookmarkBtn.addEventListener('click', toggleBookmark);
        if (showExplanationBtn) showExplanationBtn.addEventListener('click', toggleExplanation);
        if (statsBtn) statsBtn.addEventListener('click', showStatsModal);
        if (closeStatsModal) closeStatsModal.addEventListener('click', hideStatsModal);
        if (closeStatsBtn) closeStatsBtn.addEventListener('click', hideStatsModal);
        if (quickActionsBtn) quickActionsBtn.addEventListener('click', showQuickActionsModal);
        if (closeActionsModal) closeActionsModal.addEventListener('click', hideQuickActionsModal);
        if (closeActionsBtn) closeActionsBtn.addEventListener('click', hideQuickActionsModal);
        if (studyModeToggle) studyModeToggle.addEventListener('change', toggleStudyMode);
        
        const markForReviewBtn = document.getElementById('mark-for-review-btn');
        if (markForReviewBtn) markForReviewBtn.addEventListener('click', markForReview);
        const viewExplanationBtn = document.getElementById('view-explanation-btn');
        if (viewExplanationBtn) viewExplanationBtn.addEventListener('click', viewExplanation);
        const hintBtn = document.getElementById('hint-btn');
        if (hintBtn) hintBtn.addEventListener('click', getHint);
        const reportBtn = document.getElementById('report-question-btn');
        if (reportBtn) reportBtn.addEventListener('click', reportQuestion);
        
        // Keyboard navigation
        document.removeEventListener('keydown', handleKeydown);
        document.addEventListener('keydown', handleKeydown);
        
        loadPreferences();
        loadQuizHistory();
        updateBookmarksCount();
    } catch (e) {
        console.error('Error initializing quiz:', e);
    }
}
function handleKeydown(e) {
    if (e.key === 'ArrowRight') {
        goToNextQuestion();
    } else if (e.key === 'ArrowLeft') {
        goToPreviousQuestion();
    } else if (e.key.toLowerCase() === 'a' || e.key === '1') {
        selectOption(0);
    } else if (e.key.toLowerCase() === 'b' || e.key === '2') {
        selectOption(1);
    } else if (e.key.toLowerCase() === 'c' || e.key === '3') {
        selectOption(2);
    } else if (e.key.toLowerCase() === 'd' || e.key === '4') {
        selectOption(3);
    } else if (e.key.toLowerCase() === 'e' || e.key === '5') {
        selectOption(4);
    } else if (e.key === 'Enter') {
        if (showExplanationBtn && showExplanationBtn.style.display !== 'none') {
            toggleExplanation();
        }
    } else if (e.key === 's' || e.key === '5') {
        skipQuestion();
    }
}
function loadQuestion() {
    if (!questionElement || !optionsContainer) return; // Safety check
    const question = questions[currentQuestionIndex];
    if (!question) return;
    questionElement.textContent = question.question;
    currentQuestionElement.textContent = currentQuestionIndex + 1;
    if (categoryTag) categoryTag.textContent = question.category || 'Unknown';
    
    // Update difficulty tag with indicator
    if (difficultyTag) {
        difficultyTag.innerHTML = `
            <span class="difficulty-indicator difficulty-${question.difficulty.toLowerCase().replace(' ', '-')}"></span>
            ${question.difficulty}
        `;
    }
    
    if (categoryElement) categoryElement.textContent = question.category || 'All';
    
    const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
    if (progressBar) progressBar.style.width = `${progress}%`;
    
    // Update progress level for appearance change
    let progressLevel = 0;
    if (progress > 75) progressLevel = 75;
    else if (progress > 50) progressLevel = 50;
    else if (progress > 25) progressLevel = 25;
    body.setAttribute('data-progress', progressLevel);
    
    optionsContainer.innerHTML = '';
    
    const optionLetters = ['A', 'B', 'C', 'D', 'E'];
    question.options.forEach((option, index) => {
        const optionElement = document.createElement('div');
        optionElement.classList.add('option', 'fade-in');
        optionElement.setAttribute('role', 'button');
        optionElement.setAttribute('tabindex', '0');
        optionElement.setAttribute('aria-label', `Option ${optionLetters[index]}: ${option}`);
        
        const optionLetter = document.createElement('div');
        optionLetter.classList.add('option-letter');
        optionLetter.textContent = optionLetters[index];
        
        const optionText = document.createElement('div');
        optionText.classList.add('option-text');
        optionText.textContent = option;
        
        optionElement.appendChild(optionLetter);
        optionElement.appendChild(optionText);
        
        optionElement.addEventListener('click', () => selectOption(index));
        optionElement.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                selectOption(index);
            }
        });
        
        optionsContainer.appendChild(optionElement);
    });
    
    if (prevButton) prevButton.disabled = currentQuestionIndex === 0;
    if (nextButton) nextButton.textContent = currentQuestionIndex === questions.length - 1 ? 'Finish Quiz' : 'Next Question';
    if (nextButton) nextButton.innerHTML = currentQuestionIndex === questions.length - 1 ? 'Finish Quiz <i class="fas fa-flag-checkered"></i>' : 'Next Question <i class="fas fa-arrow-right"></i>';
    
    if (feedbackElement) feedbackElement.style.display = 'none';
    if (showExplanationBtn) showExplanationBtn.style.display = 'none';
    if (explanationContainer) explanationContainer.classList.remove('expanded');
    
    selectedOption = null;
    
    // Show quick actions button
    if (quickActionsBtn) quickActionsBtn.style.display = 'flex';
    
    // If the question was previously answered or skipped, display the feedback and explanations
    if (answers[currentQuestionIndex]) {
        const ans = answers[currentQuestionIndex];
        const options = document.querySelectorAll('.option');
        if (feedbackElement) feedbackElement.style.display = 'flex';
        if (showExplanationBtn) showExplanationBtn.style.display = 'block';
        
        // Update explanation with general explanation and whyNotOtherOptions
        if (explanationTextElement) {
            let explanationContent = question.explanation;
            if (question.whyNotOtherOptions) {
                explanationContent += '<br><br><strong>Why Not Other Options:</strong><ul>';
                const optionLetters = ['a', 'b', 'c', 'd'];
                optionLetters.forEach((letter, index) => {
                    if (index !== question.answer && question.whyNotOtherOptions[letter]) {
                        explanationContent += `<li><strong>Option ${letter.toUpperCase()}:</strong> ${question.whyNotOtherOptions[letter]}</li>`;
                    }
                });
                explanationContent += '</ul>';
            }
            explanationTextElement.innerHTML = explanationContent;
        }
        
        options.forEach(option => option.style.pointerEvents = 'none');
        
        if (ans.selected === 'Skipped') {
            selectedOption = null;
            if (feedbackElement) {
                feedbackElement.classList.add('skipped');
                feedbackElement.innerHTML = '<i class="fas fa-forward feedback-icon"></i><div class="feedback-text">Skipped. The right answer is highlighted.</div>';
            }
            options[question.answer].classList.add('correct');
        } else {
            const optIndex = question.options.findIndex(opt => opt === ans.selected);
            if (optIndex !== -1) {
                selectedOption = optIndex;
                options[optIndex].classList.add('selected');
                if (ans.isCorrect) {
                    if (feedbackElement) {
                        feedbackElement.classList.add('correct');
                        feedbackElement.innerHTML = '<i class="fas fa-check-circle feedback-icon"></i><div class="feedback-text">Correct! Well done.</div>';
                    }
                } else {
                    if (feedbackElement) {
                        feedbackElement.classList.add('incorrect');
                        feedbackElement.innerHTML = '<i class="fas fa-times-circle feedback-icon"></i><div class="feedback-text">Incorrect. The right answer is highlighted.</div>';
                    }
                    options[question.answer].classList.add('correct');
                    options[optIndex].classList.add('incorrect');
                }
            }
        }
    }
    
    updateBookmarkStatus();
}
function selectOption(index) {
    if (selectedOption !== null || answers[currentQuestionIndex]) return;
    
    const options = document.querySelectorAll('.option');
    options.forEach(option => option.classList.remove('selected', 'incorrect'));
    options[index].classList.add('selected');
    selectedOption = index;
    
    const question = questions[currentQuestionIndex];
    const isCorrect = index === question.answer;
    
    if (feedbackElement) feedbackElement.style.display = 'flex';
    if (isCorrect) {
        if (feedbackElement) {
            feedbackElement.classList.remove('incorrect');
            feedbackElement.classList.add('correct');
            feedbackElement.innerHTML = '<i class="fas fa-check-circle feedback-icon"></i><div class="feedback-text">Correct! Well done.</div>';
        }
        score += getScoreForDifficulty(question.difficulty);
        streak++;
        playSound('correct');
        
        if (question.difficulty === 'Hard' || question.difficulty === 'Very Hard') {
            createConfetti();
        }
    } else {
        if (feedbackElement) {
            feedbackElement.classList.remove('correct');
            feedbackElement.classList.add('incorrect');
            feedbackElement.innerHTML = '<i class="fas fa-times-circle feedback-icon"></i><div class="feedback-text">Incorrect. The right answer is highlighted.</div>';
        }
        options[question.answer].classList.add('correct');
        options[index].classList.add('incorrect');
        streak = 0;
        playSound('incorrect');
    }
    
    if (scoreElement) scoreElement.textContent = score;
    if (streakElement) streakElement.textContent = streak;
    
    if (explanationTextElement) {
        let explanationContent = question.explanation;
        if (question.whyNotOtherOptions) {
            explanationContent += '<br><br><strong>Why Not Other Options:</strong><ul>';
            const optionLetters = ['a', 'b', 'c', 'd'];
            optionLetters.forEach((letter, idx) => {
                if (idx !== question.answer && question.whyNotOtherOptions[letter]) {
                    explanationContent += `<li><strong>Option ${letter.toUpperCase()}:</strong> ${question.whyNotOtherOptions[letter]}</li>`;
                }
            });
            explanationContent += '</ul>';
        }
        explanationTextElement.innerHTML = explanationContent;
    }
    if (showExplanationBtn) showExplanationBtn.style.display = 'block';
    
    answers[currentQuestionIndex] = {
        question: question.question,
        selected: question.options[index],
        correct: question.options[question.answer],
        isCorrect: isCorrect,
        explanation: question.explanation,
        category: question.category,
        difficulty: question.difficulty
    };
    
    updatePerformanceMetrics(isCorrect, question);
    
    options.forEach(option => option.style.pointerEvents = 'none');
}
function skipQuestion() {
    if (answers[currentQuestionIndex]) return;
    
    const question = questions[currentQuestionIndex];
    const options = document.querySelectorAll('.option');
    
    if (feedbackElement) {
        feedbackElement.style.display = 'flex';
        feedbackElement.classList.add('skipped');
        feedbackElement.innerHTML = '<i class="fas fa-forward feedback-icon"></i><div class="feedback-text">Skipped. The right answer is highlighted.</div>';
    }
    
    options[question.answer].classList.add('correct');
    if (showExplanationBtn) showExplanationBtn.style.display = 'block';
    
    if (explanationTextElement) {
        let explanationContent = question.explanation;
        if (question.whyNotOtherOptions) {
            explanationContent += '<br><br><strong>Why Not Other Options:</strong><ul>';
            const optionLetters = ['a', 'b', 'c', 'd'];
            optionLetters.forEach((letter, idx) => {
                if (idx !== question.answer && question.whyNotOtherOptions[letter]) {
                    explanationContent += `<li><strong>Option ${letter.toUpperCase()}:</strong> ${question.whyNotOtherOptions[letter]}</li>`;
                }
            });
            explanationContent += '</ul>';
        }
        explanationTextElement.innerHTML = explanationContent;
    }
    
    answers[currentQuestionIndex] = {
        question: question.question,
        selected: 'Skipped',
        correct: question.options[question.answer],
        isCorrect: false,
        explanation: question.explanation,
        category: question.category,
        difficulty: question.difficulty
    };
    
    updatePerformanceMetrics(false, question);
    streak = 0;
    if (streakElement) streakElement.textContent = streak;
    
    options.forEach(option => option.style.pointerEvents = 'none');
}
function maybeHandleSkip() {
    if (!answers[currentQuestionIndex] && selectedOption === null) {
        skipQuestion();
    }
}
function toggleExplanation() {
    if (!explanationContainer) return;
    explanationContainer.classList.toggle('expanded');
    if (!showExplanationBtn) return;
    showExplanationBtn.innerHTML = explanationContainer.classList.contains('expanded') ?
        '<i class="fas fa-info-circle"></i> Hide Explanation' :
        '<i class="fas fa-info-circle"></i> Show Explanation';
}
function getScoreForDifficulty(difficulty) {
    switch (difficulty) {
        case 'Easy': return 5;
        case 'Medium': return 10;
        case 'Hard': return 15;
        case 'Very Hard': return 20;
        default: return 10;
    }
}
function updatePerformanceMetrics(isCorrect, question) {
    performanceMetrics.totalQuestions++;
    performanceMetrics.totalTime += timeElapsed;
    if (isCorrect) performanceMetrics.totalCorrect++;
    
    performanceMetrics.categories[question.category] = performanceMetrics.categories[question.category] || { correct: 0, total: 0 };
    performanceMetrics.categories[question.category].total++;
    if (isCorrect) performanceMetrics.categories[question.category].correct++;
    
    if (!performanceMetrics.difficulties[question.difficulty]) performanceMetrics.difficulties[question.difficulty] = 0;
    if (isCorrect) performanceMetrics.difficulties[question.difficulty]++;
}
function toggleBookmark() {
    if (!bookmarkBtn) return;
    const questionId = questions[currentQuestionIndex].id;
    const index = bookmarkedQuestions.indexOf(questionId);
    if (index === -1) {
        bookmarkedQuestions.push(questionId);
        bookmarkBtn.classList.add('bookmarked');
        playSound('bookmark');
    } else {
        bookmarkedQuestions.splice(index, 1);
        bookmarkBtn.classList.remove('bookmarked');
    }
    updateBookmarksCount();
    saveBookmarks();
}
function updateBookmarkStatus() {
    if (!bookmarkBtn) return;
    const questionId = questions[currentQuestionIndex].id;
    bookmarkBtn.classList.toggle('bookmarked', bookmarkedQuestions.includes(questionId));
}
function updateBookmarksCount() {
    if (!bookmarksCount) return;
    bookmarksCount.textContent = bookmarkedQuestions.length;
}
function goToNextQuestion() {
    maybeHandleSkip();
    if (currentQuestionIndex < questions.length - 1) {
        currentQuestionIndex++;
        loadQuestion();
    } else {
        body.setAttribute('data-progress', '100');
        showResults();
        saveQuizHistory();
    }
}
function goToPreviousQuestion() {
    maybeHandleSkip();
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        loadQuestion();
    }
}
function startTimer() {
    timeStarted = new Date();
    if (timerInterval) clearInterval(timerInterval);
    timerInterval = setInterval(updateTimer, 1000);
}
function updateTimer() {
    timeElapsed++;
    
    const minutes = Math.floor(timeElapsed / 60).toString().padStart(2, '0');
    const seconds = (timeElapsed % 60).toString().padStart(2, '0');
    if (timerElement) timerElement.textContent = `${minutes}:${seconds}`;
    
    if (timeElapsed >= 300) {
        if (timerElement) {
            timerElement.style.color = 'var(--danger)';
            timerElement.classList.add('pulse');
        }
    } else {
        if (timerElement) {
            timerElement.style.color = 'var(--primary)';
            timerElement.classList.remove('pulse');
        }
    }
}
function showResults() {
    if (timerInterval) clearInterval(timerInterval);
    if (quickActionsBtn) quickActionsBtn.style.display = 'none';
    
    const quizContainer = document.querySelector('.quiz-container');
    if (!quizContainer) return;
    const maxScore = questions.reduce((sum, q) => sum + getScoreForDifficulty(q.difficulty), 0);
    const percentage = ((score / maxScore) * 100).toFixed(1);
    const accuracy = ((performanceMetrics.totalCorrect / performanceMetrics.totalQuestions) * 100).toFixed(1);
    const avgTime = Math.round(performanceMetrics.totalTime / performanceMetrics.totalQuestions);
    
    quizContainer.innerHTML = `
        <div class="results-container">
            <h2 class="quiz-title">Quiz Completed!</h2>
            <p class="quiz-subtitle">You've finished the MED QUIZ</p>
            
            <div class="score-circle" style="--p: ${percentage}%">
                <div class="score-text">
                    <div class="score-value">${score}</div>
                    <div class="score-label">Points</div>
                </div>
            </div>
            
            <div class="results-stats">
                <div class="result-stat">
                    <div class="result-stat-value">${accuracy}%</div>
                    <div class="result-stat-label">Accuracy</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value">${timeElapsed}s</div>
                    <div class="result-stat-label">Time Taken</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value">${streak}</div>
                    <div class="result-stat-label">Best Streak</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value">${bookmarkedQuestions.length}</div>
                    <div class="result-stat-label">Bookmarked</div>
                </div>
            </div>
            
            <div class="review-section">
                <h3 class="review-title">Performance Analytics</h3>
                <div class="review-item">
                    <div class="review-answer">Average Time Per Question: ${avgTime}s</div>
                    <div class="review-answer">Difficulty Performance:
                        Easy: ${performanceMetrics.difficulties.Easy || 0},
                        Medium: ${performanceMetrics.difficulties.Medium || 0},
                        Hard: ${performanceMetrics.difficulties.Hard || 0},
                        Very Hard: ${performanceMetrics.difficulties['Very Hard'] || 0}
                    </div>
                </div>
                
                <h3 class="review-title">Review Your Answers</h3>
                ${answers.map((answer, index) => `
                    <div class="review-item ${answer.isCorrect ? 'correct' : answer.selected === 'Skipped' ? 'skipped' : 'incorrect'}">
                        <div class="review-question">Q${index + 1}: ${answer.question} (${answer.category} - ${answer.difficulty})</div>
                        <div class="review-answer">Your Answer: ${answer.selected}</div>
                        <div class="review-answer">Correct Answer: ${answer.correct}</div>
                        <div class="review-explanation">${answer.explanation}
                            ${questions[index].whyNotOtherOptions ? `
                                <br><br><strong>Why Not Other Options:</strong>
                                <ul>
                                    ${Object.entries(questions[index].whyNotOtherOptions).map(([key, value]) => `
                                        <li><strong>Option ${key.toUpperCase()}:</strong> ${value}</li>
                                    `).join('')}
                                </ul>
                            ` : ''}
                        </div>
                    </div>
                `).join('')}
                
                ${bookmarkedQuestions.length > 0 ? `
                    <h3 class="review-title">Bookmarked Questions</h3>
                    ${bookmarkedQuestions.map(qid => {
                        const question = questions.find(q => q.id === qid);
                        if (!question) return '';
                        return `
                            <div class="review-item">
                                <div class="review-question">${question.question} (${question.category} - ${question.difficulty})</div>
                                <div class="review-answer">Correct Answer: ${question.correctAnswer}</div>
                                <div class="review-explanation">${question.explanation}
                                    ${question.whyNotOtherOptions ? `
                                        <br><br><strong>Why Not Other Options:</strong>
                                        <ul>
                                            ${Object.entries(question.whyNotOtherOptions).map(([key, value]) => `
                                                <li><strong>Option ${key.toUpperCase()}:</strong> ${value}</li>
                                            `).join('')}
                                        </ul>
                                    ` : ''}
                                </div>
                            </div>
                        `;
                    }).join('')}
                ` : ''}
            </div>
            
            <button class="btn btn-primary mt-4" id="restart-btn">
                <i class="fas fa-redo"></i> Try Again
            </button>
            <button class="btn btn-secondary mt-2" id="review-wrong-btn">
                <i class="fas fa-search"></i> Review Incorrect Answers
            </button>
        </div>
    `;
    
    // Add event listeners after DOM update
    const restartBtn = document.getElementById('restart-btn');
    const reviewWrongBtn = document.getElementById('review-wrong-btn');
    if (restartBtn) restartBtn.addEventListener('click', restartQuiz);
    if (reviewWrongBtn) reviewWrongBtn.addEventListener('click', reviewWrongAnswers);
}
function reviewWrongAnswers() {
    const wrongAnswers = answers.filter(answer => !answer.isCorrect && answer.selected !== 'Skipped');
    
    if (wrongAnswers.length === 0) {
        alert("You don't have any incorrect answers to review!");
        return;
    }
    
    const wrongQuestions = questions.filter((q, index) =>
        answers[index] && !answers[index].isCorrect && answers[index].selected !== 'Skipped'
    );
    
    questions.length = 0;
    questions.push(...wrongQuestions);
    currentQuestionIndex = 0;
    score = 0;
    streak = 0;
    timeElapsed = 0;
    answers = [];
    selectedOption = null;
    performanceMetrics = {
        categories: {},
        difficulties: { Easy: 0, Medium: 0, Hard: 0, "Very Hard": 0 },
        totalCorrect: 0,
        totalQuestions: 0,
        totalTime: 0
    };
    
    if (timerInterval) {
        clearInterval(timerInterval);
    }
    
    body.setAttribute('data-progress', '0');
    
    const quizContainer = document.querySelector('.quiz-container');
    if (quizContainer) {
        quizContainer.innerHTML = `
            <div class="quiz-header">
                <div>
                    <h1 class="quiz-title">MED QUIZ</h1>
                    <p class="quiz-subtitle">Reviewing Incorrect Answers</p>
                </div>
                <div class="stats-container">
                    <div class="stat">
                        <span class="stat-value" id="score">0</span>
                        <span class="stat-label">Score</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="timer">00:00</span>
                        <span class="stat-label">Time</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="streak">0</span>
                        <span class="stat-label">Streak</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="category">Review</span>
                        <span class="stat-label">Mode</span>
                    </div>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar" style="width: 10%"></div>
            </div>
            <div class="question-meta">
                <div class="question-tags">
                    <span class="tag" id="category-tag">Biochemistry</span>
                    <span class="tag" id="difficulty-tag">
                        <span class="difficulty-indicator difficulty-medium"></span>
                        Medium
                    </span>
                </div>
                <button class="bookmark-btn" id="bookmark-btn" aria-label="Bookmark question">
                    <i class="fas fa-bookmark"></i>
                </button>
            </div>
            <div class="question-number">Question <span id="current-question">1</span> of <span id="total-questions">${wrongQuestions.length}</span></div>
            <div class="question-text" id="question"></div>
            <div class="options-grid" id="options-container"></div>
            <div class="feedback correct" id="feedback" style="display: none;">
                <i class="fas fa-check-circle feedback-icon"></i>
                <div class="feedback-text">Correct! Well done.</div>
            </div>
            <button class="btn btn-secondary" id="show-explanation-btn" style="display: none;">
                <i class="fas fa-info-circle"></i> Show Explanation
            </button>
            <div class="explanation-container" id="explanation-container">
                <div class="explanation">
                    <div class="explanation-title">Explanation:</div>
                    <div id="explanation-text"></div>
                </div>
            </div>
            <div class="navigation">
                <button class="btn btn-secondary" id="prev-btn" disabled>
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button class="btn btn-primary" id="next-btn">
                    Next Question <i class="fas fa-arrow-right"></i>
                </button>
                <button class="btn btn-danger" id="skip-btn">
                    <i class="fas fa-forward"></i> Skip
                </button>
            </div>
        `;
    }
    
    initQuiz();
}
function restartQuiz() {
    currentQuestionIndex = 0;
    score = 0;
    streak = 0;
    timeElapsed = 0;
    answers = [];
    selectedOption = null;
    performanceMetrics = {
        categories: {},
        difficulties: { Easy: 0, Medium: 0, Hard: 0, "Very Hard": 0 },
        totalCorrect: 0,
        totalQuestions: 0,
        totalTime: 0
    };
    
    questions.length = 0;
    questions.push(...originalQuestions);
    
    if (timerInterval) {
        clearInterval(timerInterval);
    }
    
    body.setAttribute('data-progress', '0');
    
    const quizContainer = document.querySelector('.quiz-container');
    if (quizContainer) {
        quizContainer.innerHTML = `
            <div class="quiz-header">
                <div>
                    <h1 class="quiz-title">MED QUIZ</h1>
                    <p class="quiz-subtitle">Test your medical knowledge</p>
                </div>
                <div class="stats-container">
                    <div class="stat">
                        <span class="stat-value" id="score">0</span>
                        <span class="stat-label">Score</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="timer">00:00</span>
                        <span class="stat-label">Time</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="streak">0</span>
                        <span class="stat-label">Streak</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="category">All</span>
                        <span class="stat-label">Category</span>
                    </div>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar" style="width: 10%"></div>
            </div>
            <div class="question-meta">
                <div class="question-tags">
                    <span class="tag" id="category-tag">Biochemistry</span>
                    <span class="tag" id="difficulty-tag">
                        <span class="difficulty-indicator difficulty-medium"></span>
                        Medium
                    </span>
                </div>
                <button class="bookmark-btn" id="bookmark-btn" aria-label="Bookmark question">
                    <i class="fas fa-bookmark"></i>
                </button>
            </div>
            <div class="question-number">Question <span id="current-question">1</span> of <span id="total-questions">15</span></div>
            <div class="question-text" id="question"></div>
            <div class="options-grid" id="options-container"></div>
            <div class="feedback correct" id="feedback" style="display: none;">
                <i class="fas fa-check-circle feedback-icon"></i>
                <div class="feedback-text">Correct! Well done.</div>
            </div>
            <button class="btn btn-secondary" id="show-explanation-btn" style="display: none;">
                <i class="fas fa-info-circle"></i> Show Explanation
            </button>
            <div class="explanation-container" id="explanation-container">
                <div class="explanation">
                    <div class="explanation-title">Explanation:</div>
                    <div id="explanation-text"></div>
                </div>
            </div>
            <div class="navigation">
                <button class="btn btn-secondary" id="prev-btn" disabled>
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button class="btn btn-primary" id="next-btn">
                    Next Question <i class="fas fa-arrow-right"></i>
                </button>
                <button class="btn btn-danger" id="skip-btn">
                    <i class="fas fa-forward"></i> Skip
                </button>
            </div>
        `;
    }
    
    initQuiz();
}
function markForReview() {
    toggleBookmark();
    hideQuickActionsModal();
}
function viewExplanation() {
    if (!answers[currentQuestionIndex]) return;
    toggleExplanation();
    hideQuickActionsModal();
}
function getHint() {
    if (answers[currentQuestionIndex]) return;
    const wrongOptions = Array.from(document.querySelectorAll('.option')).filter((opt, idx) => idx !== questions[currentQuestionIndex].answer);
    const randomWrong = wrongOptions[Math.floor(Math.random() * wrongOptions.length)];
    randomWrong.style.opacity = '0.5';
    randomWrong.style.pointerEvents = 'none';
    const hintText = document.createElement('div');
    hintText.textContent = 'Hint: One wrong option eliminated!';
    hintText.classList.add('feedback', 'skipped');
    optionsContainer.before(hintText);
    setTimeout(() => hintText.remove(), 3000);
    hideQuickActionsModal();
}
function reportQuestion() {
    alert('Question reported. Thank you for your feedback!');
    hideQuickActionsModal();
}
function toggleTheme() {
    if (!body || !themeToggle) return;
    const currentTheme = body.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' :
                    currentTheme === 'light' ? 'minimal' : 'dark';
    
    body.setAttribute('data-theme', newTheme);
    themeToggle.innerHTML = newTheme === 'dark' ? '<i class="fas fa-moon"></i>' :
                          newTheme === 'light' ? '<i class="fas fa-sun"></i>' :
                          '<i class="fas fa-paint-brush"></i>';
    
    localStorage.setItem('theme', newTheme);
}
function toggleSound() {
    if (!soundToggle) return;
    soundsEnabled = !soundsEnabled;
    soundToggle.innerHTML = soundsEnabled ? '<i class="fas fa-volume-up"></i>' : '<i class="fas fa-volume-mute"></i>';
    
    localStorage.setItem('soundsEnabled', soundsEnabled);
}
function toggleStudyMode() {
    if (!studyModeToggle) return;
    studyMode = studyModeToggle.checked;
    if (showExplanationBtn && explanationContainer) {
        if (studyMode) {
            showExplanationBtn.style.display = 'block';
            explanationContainer.classList.add('expanded');
            showExplanationBtn.innerHTML = '<i class="fas fa-info-circle"></i> Hide Explanation';
        } else {
            showExplanationBtn.style.display = 'none';
            explanationContainer.classList.remove('expanded');
        }
    }
    localStorage.setItem('studyMode', studyMode);
}
function playSound(type) {
    if (!soundsEnabled) return;
    
    try {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        if (type === 'correct') {
            const notes = [523.25, 659.25, 783.99];
            notes.forEach((freq, i) => {
                setTimeout(() => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start(audioContext.currentTime + i * 0.1);
                    oscillator.stop(audioContext.currentTime + i * 0.1 + 0.3);
                }, i * 100);
            });
        } else if (type === 'incorrect') {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
            oscillator.type = 'sawtooth';
            gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.4);
        } else if (type === 'bookmark') {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.type = 'triangle';
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.2);
        }
    } catch (e) {
        console.log('Web Audio API not supported');
    }
}
function createConfetti() {
    if (!confettiContainer) return;
    const colors = ['#4361ee', '#4cc9f0', '#f72585', '#f9c74f', '#7209b7'];
    
    for (let i = 0; i < 60; i++) {
        const confetti = document.createElement('div');
        confetti.classList.add('confetti');
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.width = (6 + Math.random() * 12) + 'px';
        confetti.style.height = (6 + Math.random() * 12) + 'px';
        confetti.style.animation = `confettiFall ${1.5 + Math.random() * 2.5}s linear forwards`;
        confettiContainer.appendChild(confetti);
        
        setTimeout(() => {
            if (confetti.parentNode) confetti.remove();
        }, 4000);
    }
}
function showStatsModal() {
    if (!statsModal) return;
    const totalQuestions = performanceMetrics.totalQuestions;
    const correctAnswers = performanceMetrics.totalCorrect;
    const accuracy = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
    const avgTime = totalQuestions > 0 ? Math.round(performanceMetrics.totalTime / totalQuestions) : 0;
    
    const modalTotal = document.getElementById('modal-total-questions');
    const modalCorrect = document.getElementById('modal-correct-answers');
    const modalAccuracy = document.getElementById('modal-accuracy');
    const modalAvgTime = document.getElementById('modal-avg-time');
    if (modalTotal) modalTotal.textContent = totalQuestions;
    if (modalCorrect) modalCorrect.textContent = correctAnswers;
    if (modalAccuracy) modalAccuracy.textContent = `${accuracy}%`;
    if (modalAvgTime) modalAvgTime.textContent = `${avgTime}s`;
    
    const categoryStatsContainer = document.getElementById('category-stats');
    if (categoryStatsContainer) {
        categoryStatsContainer.innerHTML = `
            <table style="width:100%; border-collapse: collapse;">
                <thead>
                    <tr><th>Category</th><th>Accuracy</th><th>Correct/Total</th></tr>
                </thead>
                <tbody>
                    ${Object.entries(performanceMetrics.categories).map(([category, stats]) => {
                        const categoryAccuracy = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
                        return `<tr><td>${category}</td><td>${categoryAccuracy}%</td><td>${stats.correct}/${stats.total}</td></tr>`;
                    }).join('')}
                </tbody>
            </table>
        `;
    }
    
    const difficultyStatsContainer = document.getElementById('difficulty-stats');
    if (difficultyStatsContainer) {
        difficultyStatsContainer.innerHTML = `
            <table style="width:100%; border-collapse: collapse;">
                <thead>
                    <tr><th>Difficulty</th><th>Accuracy</th><th>Correct/Total</th></tr>
                </thead>
                <tbody>
                    ${Object.entries(performanceMetrics.difficulties).map(([difficulty, correctCount]) => {
                        const diffTotals = {};
                        answers.forEach(ans => {
                            if (ans.difficulty && ans.isCorrect !== undefined) {
                                if (!diffTotals[ans.difficulty]) diffTotals[ans.difficulty] = { correct: 0, total: 0 };
                                diffTotals[ans.difficulty].total++;
                                if (ans.isCorrect) diffTotals[ans.difficulty].correct++;
                            }
                        });
                        const totalForDifficulty = diffTotals[difficulty] ? diffTotals[difficulty].total : 0;
                        if (totalForDifficulty > 0) {
                            const difficultyAccuracy = Math.round((correctCount / totalForDifficulty) * 100);
                            return `<tr><td>${difficulty}</td><td>${difficultyAccuracy}%</td><td>${correctCount}/${totalForDifficulty}</td></tr>`;
                        }
                        return '';
                    }).join('')}
                </tbody>
            </table>
        `;
    }
    
    const historyContainer = document.getElementById('history-stats');
    if (historyContainer) {
        if (quizHistory.length === 0) {
            historyContainer.innerHTML = '<p>No history yet.</p>';
        } else {
            historyContainer.innerHTML = `
                <table style="width:100%; border-collapse: collapse;">
                    <thead>
                        <tr><th>Date</th><th>Score</th><th>Percentage</th><th>Time</th><th>Streak</th></tr>
                    </thead>
                    <tbody>
                        ${quizHistory.map(h => {
                            const date = new Date(h.timestamp).toLocaleString();
                            return `<tr><td>${date}</td><td>${h.score}</td><td>${h.percentage}%</td><td>${h.timeSpent}s</td><td>${h.streak}</td></tr>`;
                        }).join('')}
                    </tbody>
                </table>
            `;
        }
    }
    
    statsModal.classList.add('active');
}
function hideStatsModal() {
    if (statsModal) statsModal.classList.remove('active');
}
function showQuickActionsModal() {
    if (quickActionsModal) quickActionsModal.classList.add('active');
}
function hideQuickActionsModal() {
    if (quickActionsModal) quickActionsModal.classList.remove('active');
}
function loadPreferences() {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme && body) {
        body.setAttribute('data-theme', savedTheme);
        if (themeToggle) {
            themeToggle.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-moon"></i>' :
                                  savedTheme === 'light' ? '<i class="fas fa-sun"></i>' :
                                  '<i class="fas fa-paint-brush"></i>';
        }
    }
    
    const savedSounds = localStorage.getItem('soundsEnabled');
    if (savedSounds !== null) {
        soundsEnabled = savedSounds === 'true';
        if (soundToggle) {
            soundToggle.innerHTML = soundsEnabled ? '<i class="fas fa-volume-up"></i>' : '<i class="fas fa-volume-mute"></i>';
        }
    }
    
    const savedStudyMode = localStorage.getItem('studyMode');
    if (savedStudyMode !== null) {
        studyMode = savedStudyMode === 'true';
        if (studyModeToggle) studyModeToggle.checked = studyMode;
        if (studyMode && showExplanationBtn && explanationContainer) {
            showExplanationBtn.style.display = 'block';
            explanationContainer.classList.add('expanded');
            showExplanationBtn.innerHTML = '<i class="fas fa-info-circle"></i> Hide Explanation';
        }
    }
}
function saveBookmarks() {
    localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarkedQuestions));
}
function loadQuizHistory() {
    const saved = localStorage.getItem('quizHistory');
    if (saved) {
        try {
            quizHistory = JSON.parse(saved);
        } catch (e) {
            quizHistory = [];
        }
    }
    loadBookmarks();
}
function saveQuizHistory() {
    const maxScore = questions.reduce((sum, q) => sum + getScoreForDifficulty(q.difficulty), 0);
    quizHistory.push({
        timestamp: new Date().toISOString(),
        score: score,
        percentage: ((score / maxScore) * 100).toFixed(1),
        timeSpent: timeElapsed,
        streak: streak,
        answers: answers,
        performanceMetrics: performanceMetrics
    });
    localStorage.setItem('quizHistory', JSON.stringify(quizHistory));
}
function loadBookmarks() {
    const saved = localStorage.getItem('bookmarkedQuestions');
    if (saved) {
        try {
            bookmarkedQuestions = JSON.parse(saved);
        } catch (e) {
            bookmarkedQuestions = [];
        }
    }
}
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initQuiz);
} else {
    initQuiz();
}
</script>
</body>

</html>
